<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Análisis de datos - 1&nbsp; Introducción al Análisis de Datos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./EM.html" rel="next">
<link href="./index.html" rel="prev">
<link href="./atlas.jpeg" rel="icon" type="image/jpeg">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>

<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.1/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./intro.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción al Análisis de Datos</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Análisis de datos</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/AprendeR-UIB/AD/Enlaces" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Alternar modo lector">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Presentación</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción al Análisis de Datos</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./EM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Análisis Multivariante</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#la-estadística-y-el-método-científico" id="toc-la-estadística-y-el-método-científico" class="nav-link active" data-scroll-target="#la-estadística-y-el-método-científico"><span class="header-section-number">1.1</span> La estadística y el método científico</a></li>
  <li><a href="#gestión-básica-de-datos" id="toc-gestión-básica-de-datos" class="nav-link" data-scroll-target="#gestión-básica-de-datos"><span class="header-section-number">1.2</span> Gestión básica de datos</a></li>
  <li><a href="#r-rstudio---posit-rmarkdowm---quarto" id="toc-r-rstudio---posit-rmarkdowm---quarto" class="nav-link" data-scroll-target="#r-rstudio---posit-rmarkdowm---quarto"><span class="header-section-number">1.3</span> R/ RStudio - Posit / RMarkdowm - Quarto</a></li>
  <li><a href="#control-de-versiones-con-git-github" id="toc-control-de-versiones-con-git-github" class="nav-link" data-scroll-target="#control-de-versiones-con-git-github"><span class="header-section-number">1.4</span> Control de versiones con Git / GitHub</a>
  <ul class="collapse">
  <li><a href="#git-github-con-r" id="toc-git-github-con-r" class="nav-link" data-scroll-target="#git-github-con-r"><span class="header-section-number">1.4.1</span> Git / GitHub con R</a></li>
  <li><a href="#conectar-rstudio-y-github" id="toc-conectar-rstudio-y-github" class="nav-link" data-scroll-target="#conectar-rstudio-y-github"><span class="header-section-number">1.4.2</span> Conectar RStudio y GitHub</a></li>
  <li><a href="#conectar-proyectos-de-rstudio-con-repositorios-de-github" id="toc-conectar-proyectos-de-rstudio-con-repositorios-de-github" class="nav-link" data-scroll-target="#conectar-proyectos-de-rstudio-con-repositorios-de-github"><span class="header-section-number">1.4.3</span> Conectar proyectos de RStudio con repositorios de GitHub</a></li>
  <li><a href="#flujo-de-trabajo-general" id="toc-flujo-de-trabajo-general" class="nav-link" data-scroll-target="#flujo-de-trabajo-general"><span class="header-section-number">1.4.4</span> Flujo de trabajo general</a></li>
  </ul></li>
  <li><a href="#los-datos-y-sus-tipos" id="toc-los-datos-y-sus-tipos" class="nav-link" data-scroll-target="#los-datos-y-sus-tipos"><span class="header-section-number">1.5</span> Los datos y sus tipos</a></li>
  <li><a href="#práctica-1" id="toc-práctica-1" class="nav-link" data-scroll-target="#práctica-1"><span class="header-section-number">1.6</span> <span style="color: red;"><em>Práctica 1</em></span>:</a></li>
  <li><a href="#gramática-limpia-y-coherente-con-tidyverse" id="toc-gramática-limpia-y-coherente-con-tidyverse" class="nav-link" data-scroll-target="#gramática-limpia-y-coherente-con-tidyverse"><span class="header-section-number">1.7</span> Gramática limpia y coherente con <code>Tidyverse</code></a>
  <ul class="collapse">
  <li><a href="#la-librería-tidyverse" id="toc-la-librería-tidyverse" class="nav-link" data-scroll-target="#la-librería-tidyverse"><span class="header-section-number">1.7.1</span> La librería <code>Tidyverse</code></a></li>
  <li><a href="#el-operador-de-tuberías-pipe" id="toc-el-operador-de-tuberías-pipe" class="nav-link" data-scroll-target="#el-operador-de-tuberías-pipe"><span class="header-section-number">1.7.2</span> El operador de tuberías (pipe) <code>%&gt;%</code></a></li>
  <li><a href="#data-frames-avanzados-tibbels" id="toc-data-frames-avanzados-tibbels" class="nav-link" data-scroll-target="#data-frames-avanzados-tibbels"><span class="header-section-number">1.7.3</span> Data frames avanzados <code>tibbels</code></a></li>
  <li><a href="#lectura-de-datos-de-texto-rectangulares-readr" id="toc-lectura-de-datos-de-texto-rectangulares-readr" class="nav-link" data-scroll-target="#lectura-de-datos-de-texto-rectangulares-readr"><span class="header-section-number">1.7.4</span> Lectura de datos de texto rectangulares <code>readr</code></a></li>
  <li><a href="#ordenando-datos-tidyr" id="toc-ordenando-datos-tidyr" class="nav-link" data-scroll-target="#ordenando-datos-tidyr"><span class="header-section-number">1.7.5</span> Ordenando datos <code>tidyr</code></a></li>
  <li><a href="#manejo-de-nas" id="toc-manejo-de-nas" class="nav-link" data-scroll-target="#manejo-de-nas"><span class="header-section-number">1.7.6</span> <strong>Manejo de NAs</strong></a></li>
  <li><a href="#manipulación-de-datos-dplyr" id="toc-manipulación-de-datos-dplyr" class="nav-link" data-scroll-target="#manipulación-de-datos-dplyr"><span class="header-section-number">1.7.7</span> Manipulación de datos <code>dplyr</code></a></li>
  <li><a href="#visualización-de-datos-ggplot2" id="toc-visualización-de-datos-ggplot2" class="nav-link" data-scroll-target="#visualización-de-datos-ggplot2"><span class="header-section-number">1.7.8</span> Visualización de datos <code>ggplot2</code></a></li>
  <li><a href="#gramática-básica-de-ggplot2" id="toc-gramática-básica-de-ggplot2" class="nav-link" data-scroll-target="#gramática-básica-de-ggplot2"><span class="header-section-number">1.7.9</span> Gramática básica de <code>ggplot2</code></a></li>
  <li><a href="#más-elementos-de-la-gramática" id="toc-más-elementos-de-la-gramática" class="nav-link" data-scroll-target="#más-elementos-de-la-gramática"><span class="header-section-number">1.7.10</span> Más elementos de la gramática …</a></li>
  <li><a href="#visualizando-una-variable-cualitativa-con-ggplot2" id="toc-visualizando-una-variable-cualitativa-con-ggplot2" class="nav-link" data-scroll-target="#visualizando-una-variable-cualitativa-con-ggplot2"><span class="header-section-number">1.7.11</span> Visualizando una variable cualitativa con ggplot2</a></li>
  <li><a href="#cruzando-dos-variables-cualitativas-con-ggplot2" id="toc-cruzando-dos-variables-cualitativas-con-ggplot2" class="nav-link" data-scroll-target="#cruzando-dos-variables-cualitativas-con-ggplot2"><span class="header-section-number">1.7.12</span> Cruzando dos variables cualitativas con ggplot2</a></li>
  <li><a href="#visualizando-una-variable-cuantitativa-con-ggplot2" id="toc-visualizando-una-variable-cuantitativa-con-ggplot2" class="nav-link" data-scroll-target="#visualizando-una-variable-cuantitativa-con-ggplot2"><span class="header-section-number">1.7.13</span> Visualizando una variable cuantitativa con ggplot2</a></li>
  <li><a href="#cruzando-una-variable-cuantitativa-con-una-cualitativa" id="toc-cruzando-una-variable-cuantitativa-con-una-cualitativa" class="nav-link" data-scroll-target="#cruzando-una-variable-cuantitativa-con-una-cualitativa"><span class="header-section-number">1.7.14</span> Cruzando una variable cuantitativa con una cualitativa</a></li>
  <li><a href="#ejemplos-integrando-las-herramientas-de-tidyverse" id="toc-ejemplos-integrando-las-herramientas-de-tidyverse" class="nav-link" data-scroll-target="#ejemplos-integrando-las-herramientas-de-tidyverse"><span class="header-section-number">1.7.15</span> Ejemplos integrando las herramientas de tidyverse</a></li>
  <li><a href="#extensiones-de-ggplot" id="toc-extensiones-de-ggplot" class="nav-link" data-scroll-target="#extensiones-de-ggplot"><span class="header-section-number">1.7.16</span> Extensiones de ggplot</a></li>
  <li><a href="#gráficos-interactivos" id="toc-gráficos-interactivos" class="nav-link" data-scroll-target="#gráficos-interactivos"><span class="header-section-number">1.7.17</span> Gráficos interactivos</a></li>
  <li><a href="#recursos-adicionales" id="toc-recursos-adicionales" class="nav-link" data-scroll-target="#recursos-adicionales"><span class="header-section-number">1.7.18</span> Recursos adicionales</a></li>
  </ul></li>
  <li><a href="#práctica-2" id="toc-práctica-2" class="nav-link" data-scroll-target="#práctica-2"><span class="header-section-number">1.8</span> <span style="color: red;"><em>Práctica 2</em></span></a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/AprendeR-UIB/AD/Enlaces/edit/main/intro.qmd" class="toc-action">Editar esta página</a></p><p><a href="https://github.com/AprendeR-UIB/AD/Enlaces/issues/new" class="toc-action">Informar de un problema</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introducción al Análisis de Datos</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="la-estadística-y-el-método-científico" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="la-estadística-y-el-método-científico"><span class="header-section-number">1.1</span> La estadística y el método científico</h2>
<ul>
<li><p>La ciencia avanza definiendo teorías que intentan explicar el mundo.</p></li>
<li><p>La comunidad científica elabora teorías/hipótesis que intentan explicar hechos que ocurren. Una hipótesis es científica si existe alguna manera de comprobar su veracidad.</p></li>
<li><p>Podemos diseñar experimentos para comprobar si se cumplen las afirmaciones de la teoría.</p></li>
<li><p>Como la naturaleza tiene un comportamiento con “incertidumbre”, es decir, que si repetimos el experimento se obtienen resultados similares pero no idénticos, la estadística permite analizar estos resultados y ver si las desviaciones de la teoría son razonables o no.</p></li>
<li><p>Se ha definido estadística de muchas maneras. La que más nos gusta, y que está relaciona con la situación que acabamos de explicar, es que:</p></li>
</ul>
<blockquote class="blockquote">
<p>La <strong>estadística</strong> es la ciencia que permite adquirir conocimiento generalizable a partir de datos.</p>
</blockquote>
<ul>
<li><p>La estadística ayuda en todas las fases del método científico:</p>
<ul>
<li><p><span style="color: blue;"><em>Planteamiento del problema</em></span>: Diseño de experimentos y encuestas, determinación del tamaño de la muestra y métodos de muestreo adecuados para garantizar que los datos recopilados sean representativos de la población objetivo.</p></li>
<li><p><span style="color: blue;"><em>Recopilación de datos</em></span>: Proporciona herramientas para recopilar y organizar datos relevantes sobre el problema.</p></li>
<li><p><span style="color: blue;"><em>Análisis de datos</em></span>: Aplicación de técnicas descriptivas (Análisis explorartorio de datos), así como técnicas inferenciales (contrastes de hipótesis, ajustes de modelos,etc) para sacar conclusiones sobre la población en función de la muestra recopilada.</p></li>
<li><p><span style="color: blue;"><em>Interpretación de resultados</em></span>: Ayuda a los científicos a determinar si los resultados son estadísticamente significativos y si las conclusiones se pueden generalizar a la población más amplia.</p></li>
<li><p><span style="color: blue;"><em>Comunicación de hallazgos</em></span>: La estadística se usa para comunicar los resultados de manera efectiva a través de gráficos, tablas y tests estadísticos. Esto es esencial para que otros investigadores puedan comprender y evaluar los resultados.</p></li>
<li><p><span style="color: blue;"><em>Reproducibilidad</em></span>: Proporciona métodos estadísticos claros y transparentes, se permite que otros repitan los experimentos y análisis para verificar la validez de los hallazgos.</p></li>
<li><p><span style="color: blue;"><em>Toma de decisiones</em></span>: En muchos campos científicos, los resultados estadísticos se utilizan para tomar decisiones importantes. Por ejemplo, en la medicina, la estadística se usa para evaluar la eficacia de tratamientos y tomar decisiones sobre su uso en la práctica clínica.</p></li>
</ul></li>
<li><p>Cuando alguien realiza un nuevo descubrimiento lo envía a una revisión por pares de la comunidad científica. Para que estos acepten el descubrimiento y pase a formar parte del conocimiento científico debes poner a disposición:</p>
<ul>
<li><p>Los datos brutos (raw data) junto con el modelo de datos.</p></li>
<li><p>El código parametrizado y con las líneas más importantes comentadas.</p></li>
<li><p>La documentación (artículo/ reporte) donde se interpretan y presentan los resultados más relevantes.</p></li>
</ul></li>
</ul>
<p>En resumen, la estadística es una herramienta esencial que ayuda a garantizar que la investigación científica sea rigurosa, confiable y basada en evidencia sólida.</p>
</section>
<section id="gestión-básica-de-datos" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="gestión-básica-de-datos"><span class="header-section-number">1.2</span> Gestión básica de datos</h2>
<ul>
<li><p>En estadística, siempre se empieza obteniendo unos <strong>datos</strong> sobre un grupo (relativamente pequeño) de individuos de una población. Bueno, en realidad, no se empieza obteniendo los datos, sino planificando cuidadosamente cómo se van a obtener, pero todo forma parte de la “obtención” de los datos.</p></li>
<li><p>Se <strong>generaliza la información</strong> que se ha obtenido sobre este grupo de personas al total de la población.</p></li>
<li><p>Y no se trata de trucos de magia adivinatoria, sino de una <strong>ciencia</strong> cuya metodología ha sido validada por medio de demostraciones matemáticas o, en el peor de los casos, mediante simulaciones numéricas (el equivalente en matemáticas de los experimentos en las otras ciencias).</p></li>
</ul>
<p>Así pues, la situación de partida a la hora de aplicar técnicas estadísticas es que disponemos de un conjunto de datos que describen algunas características de un grupo de individuos. El análisis estadístico de estos datos puede ser entonces de dos tipos básicos:</p>
<ul>
<li><p><strong>Análisis exploratorio de datos</strong>, cuando nuestro objetivo sea simplemente resumir, representar y explicar los datos concretos de los que disponemos. La <strong>estadística descriptiva</strong> es el conjunto de técnicas que se usan con este fin.</p></li>
<li><p><strong>Análisis inferencial</strong>, si nuestro objetivo es deducir (<strong>inferir</strong>), a partir de estos datos, información significativa sobre el total de la población de interés. Las técnicas que se usan en este caso forman la <strong>estadística inferencial</strong>.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/EstInf.png" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<p>Ambos tipos de análisis están relacionados. Por un lado, porque es conveniente (obligatorio, en nuestra opinión) empezar cualquier análisis inferencial dando un vistazo a los datos que se usarán.</p>
<p>Por otro, porque muchas técnicas descriptivas permiten estimar propiedades de la población de la que se ha extraído la muestra. Por citar un ejemplo, la media aritmética de las alturas de un grupo de individuos nos da un valor más o menos representativo de sus alturas, pero también sirve para <em>estimar</em> la altura media de los individuos de la población total.</p>
<p>La estadística inferencial entra en juego cuando se quiere obtener información sobre una población y no se puede acceder a todos sus integrantes. Si por ejemplo queremos conocer la altura media de los estudiantes matriculados en esta asignatura de la UIB en este curso, en principio no necesitamos para nada la estadística inferencial. Sois pocos, os mediríamos a todos y calcularíamos la media. En todo caso, usaríamos técnicas de estadística descriptiva para arropar este valor representando la distribución de vuestras alturas de manera adecuada.</p>
<p>Pero si quisiéramos conocer la altura media de los mallorquines entre 18 y 25 años, sería muy complicado medirlos a todos. Entonces, lo que haríamos sería tomar una muestra representativa de esta población, medirlos y a partir de sus alturas estimar dicha altura media. Naturalmente, lo más seguro es que de esta manera no obtuviéramos el valor exacto de la altura media de los mallorquines de 18 años, nos tendríamos que conformar con obtener una aproximación dentro de un cierto margen de error y determinar la probabilidad de acertar con nuestra estimación y este margen de error. La estadística inferencial es la que nos permite acotar el error que podamos haber cometido y calcular la probabilidad de cometerlo, incluyendo la metodología que tendríamos que haber usado para tomar la muestra en primer lugar.</p>
</section>
<section id="r-rstudio---posit-rmarkdowm---quarto" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="r-rstudio---posit-rmarkdowm---quarto"><span class="header-section-number">1.3</span> R/ RStudio - Posit / RMarkdowm - Quarto</h2>
<p>Todas las técnicas que usaremos en la asignatura pueden ser implementadas y/o desarrolladas en software libre como Python y R. Ambos se consideran lenguajes de programación esenciales para la ciencia de datos. Lo ideal sería dominar ambos para tener una base de programación completa, pero:</p>
<ul>
<li><p>R es un <strong>lenguaje específico utilizado para el análisis de datos y la estadística</strong>.</p></li>
<li><p>R es muy adecuado para un sub-campo del aprendizaje automático conocido como aprendizaje estadístico. Cualquier persona con una formación formal en estadística debería reconocer la sintaxis y la construcción de R.</p></li>
<li><p>Al igual que Python, R cuenta con una sólida comunidad, estructurada alrededor de la “Comprehensive R Archive Network”, o CRAN, pero no ofrece un desarrollo de software de propósito general como Python.</p></li>
<li><p>Cada día salen nuevos paquetes que extienden las funcionalidades de R y cubren casi todas las necesidades computacionales y estadísticas de un científico. Para que os hagáis una idea, en el momento de revisar estas notas (septiembre de 2023) el número de paquetes en el repositorio de la CRAN acaba de superar los 19800.</p></li>
<li><p>El acceso a R se proporciona a través de RStudio, entorno que presenta una ventana de visualización, un explorador de archivos, un visor de datos y un editor. Este entorno suele ser menos intimidante que el shell de R. Además, cuenta con ayuda integrada, resaltado de sintaxis y completado contextual por tabulaciones; todas estas herramientas facilitan el trabajo.</p></li>
<li><p>RStudio tiene un nuevo nombre desde julio de 2022: <strong>Posit</strong>. Posit es una palabra que significa proponer una idea para su discusión, proviene de la aspiración científica de construir niveles cada vez mayores de conocimiento y comprensión de experimentos que generan</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/posit.JPG" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Posit tiene como misión la creación de software libre y de código abierto para la ciencia de datos, la investigación científica y la comunicación técnica. Han incluido algunas herramientas para Python a través de <strong>Quarto</strong>.</p></li>
<li><p>Quarto está pensado como un cuaderno de laboratorio moderno donde predomina R pero que soporta código Python (<code>reticulate</code>), SQL, Julia, entre otros; pensado para experimentos que requieren multilenguaje.</p></li>
<li><p><strong>Posit Cloud</strong> permite acceder al potente conjunto de herramientas de ciencia de datos de Posit directamente desde su navegador. Esto favorecerá el trabajo en equipo. Podéis revisar la siguiente <a href="https://posit.cloud/learn/guide">Guía</a> para crearos una cuenta.</p></li>
</ul>
</section>
<section id="control-de-versiones-con-git-github" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="control-de-versiones-con-git-github"><span class="header-section-number">1.4</span> Control de versiones con Git / GitHub</h2>
<ul>
<li><p>En esta asignatura la forma de llegar a un resultado de análisis de datos es tan importante como el propio resultado. Además, uno de los objetivos es exponeros al uso de herramientas de software para la ciencia de datos moderna.</p></li>
<li><p>La idea de reproducibilidad lleva implícita la colaboración. El código que se produce es parte de la documentación del proceso y es fundamental compartirlo (aunque sólo sea con uno mismo).</p></li>
<li><p>Lo anterior se logra mejor con un sistema de control de versiones distribuido como <strong>Git</strong>. Mantener un registro sobre los proyectos, es lo que permite rastrear y gestionar cambios en el código a lo largo del tiempo. Se puede decir que nos permite guardar el progreso de nuestro código de tal forma que, si en algún momento cometemos algún error irreversible en una versión posterior, siempre podremos recuperar una versión anterior en la que todo funcionaba correctamente y retomar el proyecto desde ese punto.</p></li>
<li><p>Git permite la colaboración, pero carece de características sociales y herramientas específicas para la colaboración en equipo. <strong>GitHub</strong> proporciona herramientas para la revisión de código, la gestión de problemas y la colaboración en proyectos.</p></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/GitHub.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>GitHub es un servicio en la nube donde se pueden subir repositorios propios y compartir el código con otras personas de tal forma que sea accesible desde Internet.</p></li>
<li><p>Un repositorio funciona como una carpeta virtual. En él se encuentran todos los archivos de un proyecto y el historial de revisiones de cada uno, permitiendo restablecer una versión del código en caso de error en su ejecución.</p></li>
<li><p>Podemos ver proyectos de otras usuarios, valorarlos, proponer mejoras en el código, GitHub es una de las aplicaciones que mejora la gestión de proyectos y el acceso a recursos compartidos.</p></li>
<li><p>En octubre del 2021 se estrenó <strong>GitHub Copilot</strong>, una herramienta de inteligencia artificial en la nube desarrollada conjuntamente entre GitHub y OpenAI. Su objetivo es sugerir y autocompletar el código escrito en entornos de desarrollo integrados (IDE).</p></li>
</ul>
<blockquote class="blockquote">
<p>En esta clase, utilizaremos GitHub como sistema de gestión del aprendizaje para distribuir y recopilar las entregas como repositorios.</p>
</blockquote>
<ul>
<li>Crearemos en GitHub un repositorio por estudiante/equipo para cada entrega. Utilizaremos un sencillo flujo de trabajo centralizado que sólo requiere realizar acciones simples como push, pull, add, rm, commit, status y clone.</li>
</ul>
<section id="git-github-con-r" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="git-github-con-r"><span class="header-section-number">1.4.1</span> Git / GitHub con R</h3>
<p>Veamos cómo configurar todo. Gran parte de lo que está aquí proviene del libro <a href="https://happygitwithr.com/">Happy Git and GitHub for the useR</a> de Jenny Bryan y del artículo de <a href="https://rfortherestofus.com/2021/02/how-to-use-git-github-with-r/">David Keyes</a> puedes ver sus vídeos en caso de que, la breve explicación que presentamos abajo, no sea suficiente para ti.</p>
<ul>
<li><span style="color: blue;"><em>Instalar Git</em></span>: El primer paso es instalar Git, en el <a href="https://happygitwithr.com/install-git">Capítulo 6 del libro</a> explican el proceso para los usuarios de Mac, Windows y Linux. Nosotros ya lo tenemos instalado, así que mostramos cómo verificar si tienes Git instalado y su versión usando el terminal en RStudio.</li>
</ul>
<p>En el terminal de RStudio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>which git <span class="co"># ruta donde está instalado el Git</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>git <span class="sc">--</span>version <span class="co"># version</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><span style="color: blue;"><em>Configurar Git (Editar gitconfig file)</em></span>:El siguiente paso es configurar Git. Esto se trata en el Capítulo 7 del libro, aunque mostramos lo que creemos es un proceso un poco más fácil. Específicamente, sugerimos usar la función <code>edit_git_config()</code> del paquete <code>usethis</code>, que abrirá su archivo gitconfig. Agrega tu nombre y correo electrónico y cierra esto.</li>
</ul>
<p>En la consola de RStudio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">edit_git_config</span>()</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificar en el fichero ".gitconfig" los apartados: "name" y "email" </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># y guardar el fichero</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><span style="color: blue;"><em>Inicializar un repositorio Git</em></span>: Ahora que has instalado y configurado Git, puedes usarlo localmente. La función <code>use_git()</code> agregará un repositorio Git (a menudo denominado “repositorio”) a un proyecto RStudio existente. Aquí crearemos un nuevo proyecto y luego inicializaremos un repositorio de Git.</li>
</ul>
<p>En RStudio: * Crear un proyecto nuevo</p>
<ul>
<li><p>Seleccionar “Nuevo Directorio”</p></li>
<li><p>Proyecto</p>
<ul>
<li>Activar: “Create a git repository”</li>
</ul></li>
</ul>
<p>En la consola de RStudio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_git</span>()</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Elegir siempre la opción: 1</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Y ante la ventana, seleccionar: "Save"</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Y visitar la pestaña: “Git” en RStudio.</p>
<ul>
<li><span style="color: blue;"><em>Ver historial de confirmación</em></span>: Ahora que tu proyecto de RStudio tiene un repositorio Git asociado, verás una pestaña adicional en la parte superior derecha: la pestaña Git. Desde aquí, puedes ver todo el historial de cambios en tu código a lo largo del tiempo (¡todavía no muchos!).</li>
</ul>
<p>En RStudio:</p>
<p>Visitar la pestaña: “Git” de RStudio Pulsar el icono del reloj para ver el historial de “Commit” realizados para ver el “Initial Commit”.</p>
<ul>
<li><span style="color: blue;"><em>Hacer una confirmación (commit) y ver más historia</em></span>: Git no realiza un seguimiento automático de los cambios de la manera en que lo hace una herramienta como Google Docs. En su lugar, tienes que decirle a Git: Hice cambios y quiero que mantengas un registro de ellos. Decirle a Git esto se llama hacer una confirmación (commit) y puedes hacerlo desde RStudio.</li>
</ul>
<p>Cada commit tiene un mensaje de confirmación, lo que es útil porque, cuando miras tu historial de código, ves lo que hiciste en cada momento (es decir, en cada commit). RStudio tiene una herramienta integrada para ver su historial de código. Puedes hacer clic en cualquier commit para ver qué cambió, en relación con el commit anterior. Las líneas que se agregaron en verde; y las que se eliminaron en rojo.</p>
<p>En RStudio:</p>
<ul>
<li><p>Crear un fichero de script R: “test.R” y guardarlo.</p></li>
<li><p>Visita la pestaña “Git” de RStudio y pulsa sobre el botón de “commit” para confirmar la creación del fichero: “test.R”.</p></li>
<li><p>En el panel del commit añada un texto que lo defina.</p></li>
<li><p>Haz varios cambios en el fichero “test.R” y en cada uno de ellos haz de nuevo un “commit”.</p></li>
<li><p>Revisa luego la historia de los cambios que se han producido en el historial (pulsar el icono del reloj).</p></li>
<li><p>Observa los nuevos cambios resaltados en color verde. Frente a los valores antiguos que aparecerán en color rojo.</p></li>
</ul>
</section>
<section id="conectar-rstudio-y-github" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="conectar-rstudio-y-github"><span class="header-section-number">1.4.2</span> Conectar RStudio y GitHub</h3>
<p>El proceso hasta ahora nos ha permitido usar Git localmente. Pero, ¿qué pasa si queremos conectarnos a GitHub? ¿Cómo lo hacemos?</p>
<p>La mejor manera de conectar RStudio y GitHub es usando tu nombre de usuario y un token de acceso personal (PAT). Para generar un token de acceso personal, usa la función <code>create_github_token()</code> de <code>usethis</code>. Esto te llevará a la página correspondiente en el sitio web de GitHub, donde le darás un nombre a tu token y lo copiarás (¡no lo pierdas porque nunca volverá a aparecer!).</p>
<p>En la consola de RStudio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">create_github_token</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Pulsa sobre el enlace que aparece en la salida en la consola.</p></li>
<li><p>Se abrirá una página web de Github en la que tendrás que pulsar el botón “Generate token”.</p></li>
<li><p>Copia el token que aparece en Github (lo utilizarás en el siguiente paso).</p></li>
<li><p>Ahora que has creado un token de acceso personal, debes almacenarlo para que RStudio pueda acceder a él y sepa conectarse a tu cuenta de GitHub. La función <code>gitcreds_set()</code> del paquete <code>gitcreds</code> te ayudará aquí. Ingresará tu nombre de usuario de GitHub y el token de acceso personal como contraseña (NO tu contraseña de GitHub). Una vez que hayas hecho todo esto, ¡habrás conectado RStudio a GitHub!.</p></li>
</ul>
<p>En la consola de RStudio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gitcreds)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>gitcreds<span class="sc">::</span><span class="fu">gitcreds_set</span>()</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Ante la pregunta: "Enter password or token"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># introduce el token copiado en el paso anterior</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="conectar-proyectos-de-rstudio-con-repositorios-de-github" class="level3" data-number="1.4.3">
<h3 data-number="1.4.3" class="anchored" data-anchor-id="conectar-proyectos-de-rstudio-con-repositorios-de-github"><span class="header-section-number">1.4.3</span> Conectar proyectos de RStudio con repositorios de GitHub</h3>
<p>Ahora que hemos conectado RStudio y GitHub, discutamos cómo hacer que los dos funcionen juntos. La idea básica es que configures los proyectos que creas en RStudio con repositorios GitHub asociados. Cada proyecto de RStudio vive en un solo repositorio de GitHub.</p>
<p>¿Cómo conectamos un proyecto de RStudio a un repositorio de GitHub? Happy Git and GitHub for the useR propone tres estrategias. Demostraremos la forma más sencilla</p>
<p>crear un repositorio en GitHub primero. Cree el repositorio y, a continuación, cuando inicie un nuevo proyecto en RStudio, utilice la opción de control de versiones, introduzca la URL de su repositorio y listo.</p>
<p><strong>GitHub primero</strong></p>
<p>Crea el repositorio en GitHub y, a continuación, cuando inicies un nuevo proyecto en RStudio, utiliza la opción de control de versiones, introduce la URL de tu repositorio y listo.</p>
<p>Para bajar un repositorio creado en Github a un proyecto local en RStudio, tendréis que realizar los siguientes pasos:</p>
<ul>
<li><p>Crear un nuevo repositorio en nuestra cuenta de Github (o utilizar uno ya existente): pulsar el botón “Create repository”.</p></li>
<li><p>Copiar al portapapeles la primera dirección que aparece (pulsando el botón de la derecha). Coincide con la dirección url que aparece en la barra del navegador.</p></li>
<li><p>En RStudio seleccionamos crear “New project”, elegimos “Version Control” y luego seleccionamos “Git”.</p></li>
<li><p>Introducimos en el primer cuadro de texto la url copiada anteriormente. Pulsamos “Create Project”.</p></li>
<li><p>A continuación podrás consultarse la pestaña “Git” y ver la información asociada al repositorio descargado.</p></li>
</ul>
</section>
<section id="flujo-de-trabajo-general" class="level3" data-number="1.4.4">
<h3 data-number="1.4.4" class="anchored" data-anchor-id="flujo-de-trabajo-general"><span class="header-section-number">1.4.4</span> Flujo de trabajo general</h3>
<p>Ahora que hemos conectado RStudio y GitHub, podemos compartir nuestro trabajo entre los dos.</p>
<p><strong>Push (Subir a Github)</strong></p>
<p>“Push” significa enviar cualquier cambio en tu código de RStudio a GitHub. Para hacer esto, primero tenemos que hacer un commit. Después de confirmar, ahora tenemos un botón (la flecha hacia arriba) en RStudio que podemos usar para enviar nuestro código a GitHub.</p>
<p>En RStudio:</p>
<ul>
<li><p>Creamos un nuevo fichero de script R o un fichero Rmd y lo guardamos.</p></li>
<li><p>Pulsamos en la pestaña “Git” sobre el botón de “commit”. Marcamos todos los ficheros sobre los checks de “Staged”, rellenamos la descripción del commit y pulsamos sobre el botón de “commit”.</p></li>
<li><p>Después de hacer el commit, pulsamos sobre el botón “Push” para subir los cambios a Github.</p></li>
<li><p>A continuación puedes comprobar en la página de Github del repositorio que se han actualizado los últimos ficheros considerados en el último commit.</p></li>
</ul>
<p><strong>Pull (Descargar desde Github)</strong></p>
<p>Lo opuesto a “empujar”Push” es bajar (“Pull”). Utilizando el botón de flecha hacia abajo, RStudio va al repositorio de GitHub, toma el código más reciente y lo lleva a su editor local.</p>
<p>Hacer “Push” regularmente es extremadamente importante si estás colaborando, aunque si eres el único que trabaja en un proyecto de RStudio y un repositorio GitHub asociado, sabes que tu código local coincide con lo que está en GitHub, por lo que es menos importante.</p>
<p>En la página de Github de nuestro repositorio:</p>
<ul>
<li><p>Editamos uno de los ficheros de nuestro repositorio pulsando sobre el icono de un lápiz (a la derecha). Realizamos alguna modificación sobre el fichero (o ficheros).</p></li>
<li><p>Pulsamos en la parte inferior de la página en el botón de “Commit changes” (rellenando los comentarios que creamos oportunos sobre el commit que se está realizando). Se puede navegar por la página de Github para consultar todos los commits realizados (y mucha más información).</p></li>
</ul>
<p>Volvemos a RStudio:</p>
<ul>
<li><p>En la pestaña “Git” pulsamos sobre el botón de la flecha que apunta hacia abajo (verde) para realizar un “Pull” o descarga de los cambios en Github a nuestro proyecto local en RStudio.</p></li>
<li><p>Después de eso puedes comprobare que los ficheros locales de nuestro proyecto se han actualizado con los cambios que se han producido en el repositorio.</p></li>
</ul>
<p><strong>¡Lo lograste!</strong></p>
<p>¡Ahora está todo configurado para usar Git y GitHub con RStudio!</p>
</section>
</section>
<section id="los-datos-y-sus-tipos" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="los-datos-y-sus-tipos"><span class="header-section-number">1.5</span> Los datos y sus tipos</h2>
<p>En vuestro curso de Estadística estudiasteis algunas técnicas básicas de estadística descriptiva. Estas técnicas consisten en una serie de valores y gráficos que nos permiten resumir y explorar un conjunto de datos, con el objetivo final de entenderlos o describirlos lo mejor posible.</p>
<p>Los datos de los que disponemos suelen ser multidimensionales, en el sentido de que observamos varias características (<strong>variables</strong>) de una serie de individuos. Almacenamos estos datos en <strong>tablas de datos</strong> como la que presentamos abajo, donde cada columna corresponde a una variable y cada fila son los datos de un individuo concreto. Así, en esta tabla, cada fila representa un niño y cada columna recoge una de las características que hemos anotado: su nombre, su altura (en cm), su número de hermanos, el color de sus cabellos, el número semanal de refrescos que suele tomar, y su grado de satisfacción con un juego para móvil (entre 0 y 5).</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-condensed table-sm table-striped small" data-quarto-postprocess="true">
<caption>Una pequeña tabla de datos sobre niños</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Nombre</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Altura</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Hermanos</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Cabello</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">Refrescos semanales</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Satisfacción App</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">1</td>
<td style="text-align: left;">Marta</td>
<td style="text-align: right;">135</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">rubio</td>
<td style="text-align: left;">2-3</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">2</td>
<td style="text-align: left;">Laura</td>
<td style="text-align: right;">132</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">negro</td>
<td style="text-align: left;">2-3</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">3</td>
<td style="text-align: left;">Xavier</td>
<td style="text-align: right;">138</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">negro</td>
<td style="text-align: left;">0-1</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">4</td>
<td style="text-align: left;">Joan</td>
<td style="text-align: right;">141</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">castaño</td>
<td style="text-align: left;">4-5</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">5</td>
<td style="text-align: left;">Maria</td>
<td style="text-align: right;">134</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">rojo</td>
<td style="text-align: left;">0-1</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">6</td>
<td style="text-align: left;">Maria</td>
<td style="text-align: right;">136</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">castaño</td>
<td style="text-align: left;">6 o más</td>
<td style="text-align: right;">5</td>
</tr>
</tbody>
</table>


</div>
</div>
<div class="cell" type="rmdcaution">

<div class="rmdcaution">
<p>En este curso vamos a “sobrecargar” el término <strong>variable</strong>, en el sentido de que tendrá dos significados diferentes que esperamos que podáis distinguir según el contexto:</p>
<ul>
<li><p>Por un lado, llamaremos <strong>variable</strong> a una característica que puede tomar diferentes valores sobre diferentes individuos; cuando tenga este sentido, a veces le añadiremos el adjetivo <strong>poblacional</strong>. Por ejemplo, la altura de las personas (de todo el mundo, de un país, de una ciudad…) es una variable poblacional.</p></li>
<li><p>Por otro lado, también llamaremos una <strong>variable</strong> a un vector formado por los valores de una variable poblacional sobre los sujetos de una muestra. Por ejemplo, las alturas de los niños recogidas en la tabla forman una variable en este sentido.</p></li>
</ul>
</div>
</div>
<p>Los tipos básicos de datos que consideramos en este curso son los siguientes:</p>
<ul>
<li><p>Datos <strong>cualitativos</strong>. Son los que expresan una cualidad del individuo, como por ejemplo el sexo cromosómico (macho, hembra), el género de una persona (hombre, mujer, lesbiana, gay, bisexual, transexual, intersexual, asexual), tipos de cáncer (de mama, de colon, de próstata…)… Si solo pueden tomar dos valores (“Sí” o “No”, “Macho” o “Hembra”…) los llamamos <strong>binarios</strong> o <strong>dicotómicos</strong> y si pueden tomar más de dos valores, <strong>politómicos</strong> o <strong>multicotómicos</strong>, dependiendo de lo que queramos complicar los adjetivos. A los posibles valores que puede tomar un tipo de datos cualitativo se los suele llamar <strong>niveles</strong>.</p>
<p>Los datos cualitativos pueden ser iguales o distintos, y no admiten ningún otro tipo de comparación.</p></li>
<li><p>Datos <strong>ordinales</strong>. Son datos similares a los cualitativos, en el sentido de que expresan una cualidad del individuo, pero con la diferencia de que se pueden ordenar de manera natural. Por ejemplo, los niveles de gravedad de una enfermedad (sano, leve, grave, muy grave, …) o las calificaciones en un examen (suspenso, aprobado, notable, sobresaliente) son datos ordinales. En cambio, no se pueden ordenar de manera significativa los sexos o los tipos de cáncer de los individuos: por eso son datos cualitativos y no ordinales.</p>
<p>También se suele llamar a los posibles valores que puede tomar un tipo de datos ordinal sus <strong>niveles</strong>.</p></li>
<li><p>Datos <strong>cuantitativos</strong>. Son datos que se refieren a medidas que sean números genuinos, con los que tenga sentido operar, tales como edades, longitudes, pesos, tiempos, números de individuos, etc. Distinguimos dos tipos:</p>
<ul>
<li><p><strong>Discretos</strong>: Pueden tomar solo valores que avanzan a saltos y que podemos identificar con números naturales: número de hermanos, número de ingresos en un día en un hospital…</p></li>
<li><p><strong>Continuos</strong>: Podrían tomar cualquier valor real dentro de un intervalo si se pudieran medir con precisión infinita: altura, temperatura, tiempo…</p></li>
</ul></li>
</ul>
<div class="cell">
<pre class="example cell-code"><code>En la tabla anterior:
  
* La variable "Nombre" es cualitativa.
* La variable "Altura" es cuantitativa continua.
* La variable "Hermanos" es cuantitativa discreta.
* La variable "Cabello" es cualitativa.
* La variable "Refrescos semanales" es ordinal.
* La variable "Satisfacción App" también es ordinal.
</code></pre>
</div>
<p>Dos puntos relevantes a tener en cuenta y que justifican algunas clasificaciones que puede que encontréis dudosas en el ejemplo anterior:</p>
<ul>
<li><p><strong>No todo número es un dato cuantitativo.</strong> Solo los consideramos cuantitativos cuando son números genuinos, “de verdad”. Por ejemplo, si pedimos a un paciente que califique su dolor con un número natural de 0 a 10, no es un dato cuantitativo, sino ordinal:</p>
<ul>
<li><p>No es una medida precisa del dolor; no son números “de verdad”, sino abreviaturas de “Nada”, “Un poquito”,…, “Matadme”.</p></li>
<li><p>Tener dolor 6 no significa “tener el doble de dolor” que tener dolor 3 (si lo significara, ¿cuál sería el valor correspondiente “al doble de dolor” que 7?). En cambio, una persona con 6 hermanos sí que tiene el doble de hermanos que si tuviera 3.</p></li>
<li><p>No tiene sentido sumarlos u operarlos en general. Por ejemplo, si yo tengo dolor de nivel 6 y tú tienes dolor de nivel 5, entre los dos no tenemos dolor de nivel 11. En cambio, si yo tengo 6 hermanos y tú 5, entre los dos sí que tenemos 11 hermanos.</p></li>
</ul>
<p>Este es justamente el caso de la variable “Satisfacción App” de la tabla anterior. Pese a que sus valores son números, el único contenido real que tienen es su orden: a la María que toma muchos refrescos le ha gustado la app bastante más que a la María que apenas toma refrescos.</p></li>
<li><p><strong>La distinción discreto-continuo es puramente teórica</strong>. En realidad, todo dato es discreto porque no podemos medir nada con precisión infinita, pero las herramientas matemáticas “continuas” (derivadas, integrales, etc.) son mucho más potentes que las discretas, por lo que siempre que tenga sentido, es conveniente considerar una variable como continua.</p>
<p>Observad, por ejemplo, la diferencia entre la altura, pongamos que medida en cm y redondeada a unidades como en la tabla anterior, y el número de hermanos. Ambos se presentan como números naturales, pero los números de hermanos no admiten mayor precisión, mientras que las alturas las podríamos medir, con los aparatos adecuados, en mm, en µm, en nm…. Como además las herramientas para tratar datos continuos son mucho más potentes, vamos a considerar las alturas como datos continuos, mientras que los números de hermanos no hay más remedio que tratarlos como discretos.</p>
<p>En concreto, <strong>es conveniente considerar en la práctica como datos continuos aquellos que dan lugar a números naturales muy grandes</strong>, como por ejemplo los números de glóbulos rojos en un litro de sangre, de bases nucléicas en un genoma, o de personas de un país. La diferencia entre diez millones, diez millones uno, diez millones dos… puede considerarse como continua: de hecho, si tomamos el millón como unidad, la diferencia está en la séptima cifra decimal.</p></li>
</ul>
<div class="cell" type="rmdnote">

<div class="rmdnote">
Hemos dicho que la variable “Cabello” es cualitativa. En principio, el color de los cabellos no tiene ningún orden “natural”. Pero si en un estudio definimos un orden claro para esta variable (por ejemplo, por la longitud de onda correspondiente) y este orden es relevante en nuestro estudio, habrá que considerarla una variable ordinal.
</div>
</div>
<div class="cell" type="rmdnote">

<div class="rmdnote">
La variable “Refrescos semanales” es de un tipo de datos ordinales muy concreto que a veces se califican de <strong>cuantitativos agrupados</strong>: sus niveles se obtienen agrupando en intervalos los posibles valores de una variable cuantitativa (en este caso, la variable discreta que mide el número preciso de refrescos semanales).
</div>
</div>
<blockquote class="blockquote">
<p>El análisis, tanto descriptivo como inferencial, de un conjunto de datos es diferente según su tipo.</p>
</blockquote>
<p>Así, para datos cualitativos sólo tiene interés estudiar y representar las frecuencias con que aparecen sus diferentes valores, mientras que el análisis de datos cuantitativos suele involucrar el cálculo de medidas estadísticas, como la media o la desviación típica, que expresen numéricamente sus propiedades.</p>
<p>Os dejamos el material <a href="https://aprender-uib.github.io/AprendeR1/">Aprender R1</a> para que repaséis los capítulos 10 al 14 correspondientes a la parte de Estadística descriptiva.</p>
</section>
<section id="práctica-1" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="práctica-1"><span class="header-section-number">1.6</span> <span style="color: red;"><em>Práctica 1</em></span>:</h2>
<ul>
<li><p>Formad grupos de 3 integrantes.</p></li>
<li><p>Trabajaréis con los datos <a href="https://allisonhorst.github.io/palmerpenguins/">pingüinos</a>, leed la documentación y seguid las siguientes instrucciones:</p>
<ul>
<li><p>Cread un repositorio en Github para vuestro grupo con un nombre que sea fácilmente identificable para los profesores de la asignatura, por ejemplo,“Entrega_1_AD”.</p></li>
<li><p>Cread un proyecto nuevo en RStudio conectado al repositorio que habéis creado en el paso anterior. Agregad un documento de quarto donde trabajaréis.</p></li>
<li><p>Instalad y cargad en RStudio la librería <code>palmerpenguins</code> , así como el conjunto de datos <code>penguins</code></p></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("palmerpenguins",dep=TRUE)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"palmerpenguins"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(penguins, <span class="at">width =</span> <span class="dv">50</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;
 1 Adelie  Torgersen           39.1          18.7
 2 Adelie  Torgersen           39.5          17.4
 3 Adelie  Torgersen           40.3          18  
 4 Adelie  Torgersen           NA            NA  
 5 Adelie  Torgersen           36.7          19.3
 6 Adelie  Torgersen           39.3          20.6
 7 Adelie  Torgersen           38.9          17.8
 8 Adelie  Torgersen           39.2          19.6
 9 Adelie  Torgersen           34.1          18.1
10 Adelie  Torgersen           42            20.2
# ℹ 334 more rows
# ℹ 4 more variables: flipper_length_mm &lt;int&gt;,
#   body_mass_g &lt;int&gt;, sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/pinguinos_madagascar.jpg" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Con lo que sabéis de R base, realizad un análisis exploratorio de datos y redactad un reporte con los hallazgos más importantes. No olvidéis agregar en el reporte el URL de vuestro repositorio de GitHub.</p></li>
<li><p>Entregad el reporte en la tarea de Aula Digital disponible. Revisad la fecha en que cierra la tarea.</p></li>
</ul>
</section>
<section id="gramática-limpia-y-coherente-con-tidyverse" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="gramática-limpia-y-coherente-con-tidyverse"><span class="header-section-number">1.7</span> Gramática limpia y coherente con <code>Tidyverse</code></h2>
<section id="la-librería-tidyverse" class="level3" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="la-librería-tidyverse"><span class="header-section-number">1.7.1</span> La librería <code>Tidyverse</code></h3>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/tidyverse-hex.PNG" class="img-fluid figure-img" style="width:40.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p><strong>Tidyverse</strong> es una colección de paquetes/librerías de R para ciencia de datos que comparten una filosofía de diseño, gramática y estructuras similar. En la página <a href="https://www.tidyverse.org/">Tidverse.org</a> podéis encontrar una descripción detallada de cada una de las librerías, un Blog con artículos de interés para la ciencia de datos, ayuda y recursos de aprendizaje.</p></li>
<li><p>Todos estos paquetes están pensados para:</p>
<ul>
<li><p>Tener una tecnología con la que puedan convivir diferentes tipos de profesionales (como por ejemplo: informáticos, economistas, matemáticos, gestores) compartiendo el mismo flujo de datos.</p></li>
<li><p>Facilitar el análisis y modelización de datos</p></li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/data-science.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p><a href="https://hadley.nz/">Hadley Wickham</a>, su creador, es el director de los científicos de datos de RStudio (actual Posit) y profesor adjunto de estadística en la Universidad de Auckland, la Universidad de Stanford y la Universidad de Rice.</p></li>
<li><p>Las librerías de tidyverse han venido a sustituir R base por su eficiencia y facilidad de programación para no informáticos. Casi todas las consultas a páginas técnicas de R son o incluyen código de <code>tidyverse</code>.</p></li>
<li><p><strong>Paquetes del core de <code>tidyverse</code>:</strong></p>
<ul>
<li><p><code>ggplot2</code>: Permite crear gráficos de forma declarativa. Le introducimos los datos, le decimos cómo asignar variables a la estética, qué tipo de gráfico utilizar, y ggplot2 nos devolverá un gráfico más “elegante” y fácil de editar que los de R base.</p></li>
<li><p><code>dplyr</code>: Gramática de manipulación de datos, un conjunto coherente de acciones que resuelven los retos más comunes como juntar datos y transformarlos.</p></li>
<li><p><code>tidyr</code>: Conjunto de funciones que ayudan a obtener datos ordenados. Los datos ordenados son datos con una forma consistente: en resumen, cada variable va en una columna, y cada fila es una unidad muestral.</p></li>
<li><p><code>readr</code>: Proporciona una forma rápida y amigable de leer datos rectangulares (como csv, tsv).</p></li>
<li><p><code>purrr</code>: Mejora el conjunto de herramientas de programación funcional (PF) de R proporcionando un conjunto completo y coherente de herramientas para trabajar con funciones y vectores. Una vez dominados los conceptos básicos, purrr permite sustituir muchos bucles <code>for</code> por código más fácil de escribir y más expresivo.</p></li>
<li><p><code>tibble</code>: Un formato más moderno que el data frame, manteniendo lo que en el tiempo ha demostrado ser eficaz, y desechando lo que no.</p></li>
<li><p><code>stringr</code>: Conjunto cohesivo de funciones diseñadas para hacer el trabajo con cadenas de texto lo más fácil posible.</p></li>
<li><p><code>forcats</code>: Conjunto de herramientas útiles que resuelven problemas comunes con factores. R utiliza factores para manejar variables categóricas, variables que tienen un conjunto fijo y conocido de posibles valores.</p></li>
<li><p><code>purrr</code>: programación funcional (pipes)</p></li>
</ul>
<p>Hay muchos otros paquetes que se integran sin problemas, por ejemplo, <code>lubridate</code> (para manejar datos tomados en el tiempo), <code>stringr</code> (texto), <code>forcats</code> (factores), etc.</p></li>
<li><p>Para instalar y cargar <code>tidyverse</code></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("tidyverse")</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter()     masks stats::filter()
✖ dplyr::group_rows() masks kableExtra::group_rows()
✖ dplyr::lag()        masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<p>Se puede ver la versión del paquete tidyverse y la de los paquetes base.</p>
<p><span style="color: red;">Cuidado</span>: algunas funciones de R se sobrescriben por sus equivalentes de <code>tidyverse</code>. En ocasiones es preferible indicar explícitamente el nombre de la función que deseamos utilizar, por ejemplo: <code>dplyr::group_by</code> para distinguir de <code>plyr::group_by</code> (dplyr es una evolución del paquete plyr).</p>
<section id="qué-significa-tidy-data" class="level4" data-number="1.7.1.1">
<h4 data-number="1.7.1.1" class="anchored" data-anchor-id="qué-significa-tidy-data"><span class="header-section-number">1.7.1.1</span> ¿Qué significa tidy data?</h4>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/plot_tidy.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Decimos que unos datos están bien estructurados o son “tidy data” si se cumplen los siguientes principios:</p>
<ul>
<li><p>Cada variable forma una columna.</p></li>
<li><p>Cada observación forma una fila.</p></li>
<li><p>Cada tipo de unidad de observación forma una tabla.</p></li>
</ul></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/tidy_data.PNG" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Algunas formas de violar los principios de los datos ordenados son:</p>
<ul>
<li><p>Las cabeceras de las columnas son valores, no nombres de variables.</p></li>
<li><p>Se almacenan múltiples variables en una columna.</p></li>
<li><p>Las variables se almacenan tanto en filas como en columnas.</p></li>
<li><p>Se almacenan múltiples tipos de unidades de observación en la misma tabla.</p></li>
<li><p>Una misma unidad de observación se almacena en varias tablas.</p></li>
</ul></li>
</ul>
<p>Veamos ejemplos de datos “No tidy” creados a partir del conjunto de datos con el que venimos trabajando de los pingüinos.</p>
<p><strong>Ejemplo 1</strong>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  species   Biscoe Dream Torgersen
  &lt;fct&gt;      &lt;int&gt; &lt;int&gt;     &lt;int&gt;
1 Adelie        44    56        52
2 Chinstrap     NA    68        NA
3 Gentoo       124    NA        NA</code></pre>
</div>
</div>
<p><strong>Ejemplo 2</strong>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  col            island     year
  &lt;chr&gt;          &lt;fct&gt;     &lt;int&gt;
1 Gentoo_NA      Biscoe     2007
2 Adelie_male    Torgersen  2007
3 Gentoo_female  Biscoe     2008
4 Chinstrap_male Dream      2008
5 Adelie_male    Torgersen  2009</code></pre>
</div>
</div>
<p><strong>Ejemplo 3</strong>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  term              bill_length_mm bill_depth_mm flipper_length_mm
  &lt;chr&gt;                      &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;
1 bill_length_mm            NA            -0.235             0.656
2 bill_depth_mm             -0.235        NA                -0.584
3 flipper_length_mm          0.656        -0.584            NA    </code></pre>
</div>
</div>
<p><strong>Ejemplo 4</strong>:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  species   island sex    model              mpg   cyl
  &lt;fct&gt;     &lt;fct&gt;  &lt;fct&gt;  &lt;chr&gt;            &lt;dbl&gt; &lt;dbl&gt;
1 Chinstrap Dream  female &lt;NA&gt;              NA      NA
2 Gentoo    Biscoe female &lt;NA&gt;              NA      NA
3 Gentoo    Biscoe male   &lt;NA&gt;              NA      NA
4 &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;   Merc 450SLC       15.2     8
5 &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;   Dodge Challenger  15.5     8
6 &lt;NA&gt;      &lt;NA&gt;   &lt;NA&gt;   Pontiac Firebird  19.2     8</code></pre>
</div>
</div>
<ul>
<li>Si tenemos datos provenientes de distintas fuentes, seguramente tendremos que limpiarlos y juntarlos en un único tibble.</li>
</ul>
</section>
</section>
<section id="el-operador-de-tuberías-pipe" class="level3" data-number="1.7.2">
<h3 data-number="1.7.2" class="anchored" data-anchor-id="el-operador-de-tuberías-pipe"><span class="header-section-number">1.7.2</span> El operador de tuberías (pipe) <code>%&gt;%</code></h3>
<ul>
<li>Los pipes básicos pasan un valor, atributo u objeto (LHS: Left Hand Side) a la siguiente llamada de función (RHS: Right Hand Side) como <strong>primer</strong> argumento</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> f <span class="co"># equivalente a: f(x)</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">f</span>(y) <span class="co"># equivalente a: f(x, y)</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> f <span class="sc">%&gt;%</span> g <span class="sc">%&gt;%</span> h <span class="co"># equivalente a: h(g(f(x)))</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Los pipes también se usan con marcadores de posición; en este caso, reenvian un valor u objeto (LHS) a la siguiente llamada de función (RHS) como <strong>cualquier</strong> argumento.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">f</span>(.) <span class="co"># equivalente a: x %&gt;% f</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">f</span>(y, .) <span class="co"># equivalente a: f(y, x)</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">f</span>(y, <span class="at">z =</span> .) <span class="co"># equivalente a: f(y, z = x)</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">f</span>(<span class="at">y =</span> <span class="fu">nrow</span>(.),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">z =</span> <span class="fu">ncol</span>(.))  <span class="co"># equivalente a: f(x, y = nrow(x), z = ncol(x))</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Una secuencia de código que comienza con el marcador de posición (<code>.</code>) devuelve una función que puede utilizarse para aplicar posteriormente la tubería a valores concretos.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> . <span class="sc">%&gt;%</span> cos <span class="sc">%&gt;%</span> sin <span class="co"># equivalente a: f &lt;- function(.) sin(cos(.))</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">f</span>(<span class="dv">20</span>) <span class="co"># equivalente a: la tubería 20 %&gt;% cos %&gt;% sin</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Para saber más sobre <code>%&gt;%</code>, haced <code>vignette("magrittr")</code> en la consola de R.</p></li>
<li><p>Se puede obtener <code>%&gt;%</code> en Rstudio desktop utilizando el atajo de teclado: <strong>Ctrl + Shift + M</strong>.</p></li>
<li><p><span style="color: blue;">Ejemplo:</span> ¿Cuál es la masa corporal media, en gramos, de los pingüinos estudiados durante el año 2007?</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sin pipes</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">subset</span>(penguins, year <span class="sc">==</span> <span class="dv">2007</span>)<span class="sc">$</span>body_mass_g, <span class="at">na.rm =</span> T)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4124.541</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Con pipes (tidyverse)</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>resultado <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  .<span class="sc">$</span>body_mass_g <span class="sc">%&gt;%</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(<span class="at">na.rm =</span> T)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>La respuesta a la pregunta formulada sería: “La masa corporal media, en gramos, de los pingüinos estudiados durante el año 2007 es 4125 gramos”.</p>
<ul>
<li><p>Ventajas de usar pipes:</p>
<ul>
<li><p>El estilo secuencial de las tuberías mejora la lectura del código en comparación con las funciones anidadas.</p></li>
<li><p>Hace innecesario almacenar los resultados intermedios.</p></li>
<li><p>Es muy fácil añadir o eliminar pasos (empalmes de tuberías) individuales en el “<strong>pipeline</strong>”.</p></li>
</ul></li>
<li><p>Las versiones recientes de R también tienen un operador de tuberías nativo (<code>|&gt;</code>).</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="dv">2</span>) <span class="co">#  es lo mismo que  head(mtcars, 2)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>              mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4      21   6  160 110  3.9 2.620 16.46  0  1    4    4
Mazda RX4 Wag  21   6  160 110  3.9 2.875 17.02  0  1    4    4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span> <span class="fu">subset</span>(cyl <span class="sc">==</span> <span class="dv">4</span>) <span class="sc">|&gt;</span> <span class="fu">nrow</span>()  </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 11</code></pre>
</div>
</div>
</section>
<section id="data-frames-avanzados-tibbels" class="level3" data-number="1.7.3">
<h3 data-number="1.7.3" class="anchored" data-anchor-id="data-frames-avanzados-tibbels"><span class="header-section-number">1.7.3</span> Data frames avanzados <code>tibbels</code></h3>
<p>EL paquete <code>tibble</code> proporciona un objeto de tipo data frame mejorado: <code>tbl_df</code>. Un <code>tibble</code> se puede crear de cuatro maneras diferentes.</p>
<ol type="a">
<li>A partir de vectores columna:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>),</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">c</span>(T, F)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  x         y z    
  &lt;chr&gt; &lt;dbl&gt; &lt;lgl&gt;
1 a         1 TRUE 
2 b         2 FALSE</code></pre>
</div>
</div>
<ol start="2" type="a">
<li>Escribiendo en texto por columnas:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tribble</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x, <span class="sc">~</span>y, <span class="sc">~</span>z,</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"a"</span>, <span class="dv">1</span>, T,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"b"</span>, <span class="dv">2</span>, F</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  x         y z    
  &lt;chr&gt; &lt;dbl&gt; &lt;lgl&gt;
1 a         1 TRUE 
2 b         2 FALSE</code></pre>
</div>
</div>
<ol start="3" type="a">
<li>Creando un <code>tibble</code> a partir de otro objeto de las clases <code>matrix</code> o <code>data.frame</code>:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>),</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">c</span>(T, F)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>as_tibble</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  x         y z    
  &lt;chr&gt; &lt;dbl&gt; &lt;lgl&gt;
1 a         1 TRUE 
2 b         2 FALSE</code></pre>
</div>
</div>
<ol start="4" type="a">
<li>Creando un <code>tibble</code> a partir de vectores con nombre:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="at">x =</span> <span class="st">"a"</span>, <span class="at">y =</span> <span class="st">"b"</span>, <span class="at">z =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">enframe</span>(<span class="at">name =</span> <span class="st">"x"</span>, <span class="at">value =</span> <span class="st">"y"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  x     y    
  &lt;chr&gt; &lt;chr&gt;
1 x     a    
2 y     b    
3 z     1    </code></pre>
</div>
</div>
<ul>
<li><p><strong>Diferencias entre tibble y data.frame</strong></p>
<ul>
<li><p>Un tibble nunca cambia el tipo de entrada. Ya no hay que preocuparse de que los caracteres se conviertan automáticamente en cadenas.</p></li>
<li><p>Un tibble puede tener columnas que son listas.</p></li>
<li><p>Un tibble puede tener nombres de variables no estándar. Pueden empezar por un número o contener espacios. Para utilizarlo se refiere a estos en un backtick, por ejemplo, <code>peso en Kg</code>.</p></li>
<li><p>Sólo recicla vectores de longitud 1.</p></li>
<li><p>No tiene como atributo nombres de filas <code>row.names</code>.</p></li>
<li><p>Por defecto, <code>tibble()</code> imprime sólo las diez primeras filas, todas las columnas que caben en la pantalla, y las clases de las columnas</p></li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>penguins</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data.frame(penguins) recordad que esto imprime todo el data frame</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>glimpse</code> nos da la versión transpuesta de <code>print()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> glimpse</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 8
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</code></pre>
</div>
</div>
<ul>
<li>El subconjunto de un <code>tibble</code> (<code>[]</code>) siempre devuelve otro <code>tibble</code> y nunca un vector (en contraste con los objetos de un <code>data.frame</code>).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(penguins) <span class="sc">%&gt;%</span> .[, <span class="st">"species"</span>] <span class="sc">%&gt;%</span> class</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>penguins[, <span class="st">"species"</span>] <span class="sc">%&gt;%</span> class</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
</div>
<ul>
<li>El subconjunto de un data.frame busca el nombre de la variable más parecida</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">data.frame</span>(penguins))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "species"           "island"            "bill_length_mm"   
[4] "bill_depth_mm"     "flipper_length_mm" "body_mass_g"      
[7] "sex"               "year"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">data.frame</span>(penguins)<span class="sc">$</span>spec)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Adelie Adelie Adelie Adelie Adelie Adelie
Levels: Adelie Chinstrap Gentoo</code></pre>
</div>
</div>
<ul>
<li><code>tibble</code> no permite la coincidencia parcial, es decir, siempre se debe proporcionar el nombre completo de la columna.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins<span class="sc">$</span>spec)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `spec`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(penguins<span class="sc">$</span>species)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Adelie Adelie Adelie Adelie Adelie Adelie
Levels: Adelie Chinstrap Gentoo</code></pre>
</div>
</div>
<ul>
<li>Las tibbles dan mejores mensajes <code>Warnings</code> y <code>Errors</code> para solucionar problemas.</li>
</ul>
</section>
<section id="lectura-de-datos-de-texto-rectangulares-readr" class="level3" data-number="1.7.4">
<h3 data-number="1.7.4" class="anchored" data-anchor-id="lectura-de-datos-de-texto-rectangulares-readr"><span class="header-section-number">1.7.4</span> Lectura de datos de texto rectangulares <code>readr</code></h3>
<p>El paquete <strong><code>readr</code></strong> proporciona funciones de lectura y escritura para múltiples formatos de archivo:</p>
<ul>
<li><p><code>read_delim()</code>: archivos delimitados en general</p></li>
<li><p><code>read_csv()</code>: archivos separados por comas</p></li>
<li><p><code>read_csv2()</code>: archivos separados por punto y coma. En la mayoría de los países europeos, Microsoft Excel utiliza <code>;</code> como delimitador común</p></li>
<li><p><code>read_tsv()</code>: archivos separados por tabulaciones</p></li>
<li><p><code>read_fwf()</code>: archivos de ancho fijo</p></li>
<li><p><code>read_table()</code>: archivos separados por espacios en blanco</p></li>
<li><p><code>read_log()</code>: archivos de registro web</p></li>
<li><p>Convenientemente, las funciones <code>write_*()</code> funcionan de forma análoga.</p></li>
<li><p>Se utiliza el paquete <code>readxl</code> para archivos de Excel,</p></li>
<li><p>El paquete <code>haven</code> para archivos de Stata, SAS y SPSS,</p></li>
<li><p>El paquete <code>googlesheets4</code> para Google Sheets</p></li>
<li><p>El paquete <code>rvest</code> para archivos HTML. Esta es la librería de referencia en el contexto de la extracción de datos de la web con <code>R</code></p></li>
</ul>
<p>Para ilustrar el paquete <code>readr</code>, hemos creado previamente un archivo csv que contiene los datos de los pingüinos, utilizando <code>write_csv(penguins, archivo = "datos/penguins.csv")</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/penguins.csv"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 344 Columns: 9
── Column specification
──────────────────────────────────────────────────────── Delimiter: "," chr
(3): species, island, sex dbl (6): ...1, bill_length_mm, bill_depth_mm,
flipper_length_mm, body_mass_g...
ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
• `` -&gt; `...1`</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/penguins.csv"</span>, <span class="at">col_select =</span> <span class="fu">c</span>(species, island))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
Rows: 344 Columns: 2
── Column specification
──────────────────────────────────────────────────────── Delimiter: "," chr
(2): species, island
ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
Specify the column types or set `show_col_types = FALSE` to quiet this message.
• `` -&gt; `...1`</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/penguins.csv"</span>,</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col_names =</span> <span class="fu">paste</span>(<span class="st">"Var"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>, <span class="at">sep =</span> <span class="st">"_"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 345 Columns: 9
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (8): Var_2, Var_3, Var_4, Var_5, Var_6, Var_7, Var_8, X9
dbl (1): Var_1

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/penguins.csv"</span>, <span class="at">skip =</span> <span class="dv">5</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 339 Columns: 9
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): Adelie, Torgersen, female
dbl (6): 5, 36.7, 19.3, 193, 3450, 2007

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<ul>
<li><p>Observa que la salida de cualquier función <code>read_*()</code> es un objeto <code>tibble</code>.</p></li>
<li><p><code>readr</code> imprime las especificaciones de las columnas después de la importación.</p></li>
<li><p>Por defecto, <code>readr</code> intenta inferir el tipo de columna (por ejemplo, <code>int</code>, <code>dbl</code>, <code>chr</code>, <code>fct</code>, <code>date</code>, <code>lgl</code>) a partir de las primeras 1.000 filas y analiza las columnas en consecuencia.</p></li>
<li><p>Una buena práctica es especificar de forma explícita el formato de las columnas.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">archivo =</span> <span class="st">"./datos/penguins.csv"</span>,</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">species =</span> <span class="fu">col_character</span>(),</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    año <span class="ot">=</span> <span class="fu">col_datetime</span>(<span class="at">formato =</span> <span class="st">"%Y"</span>),</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">isla =</span> <span class="fu">col_skip</span>())</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Analizar sólo las primeras 1.000 filas es eficiente, pero puede llevar a conjeturas erróneas:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"./datos/penguins.csv"</span>, <span class="at">guess_max =</span> <span class="dv">2000</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>Encuentra más información y funciones de <code>readr</code> en la <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/master/data-import.pdf">hoja de trucos</a>.</p></li>
<li><p>A veces puedes tener problemas al leer datos de texto (tipo carácter): los signos especiales como ö, ä o ü pueden ser codificados de forma extraña como símbolos. En esos casos debes controlar la codificación los datos en la función read_csv (por ejemplo, UTF-8)</p></li>
<li><p>Supongamos que deseamos dejar de utilizar los archivos <code>.xlsx</code> y <code>.csv</code> ya que no son capaces de almacenar de forma fiable los metadatos (por ejemplo, los tipos de datos).</p></li>
<li><p>Las funciones <code>write_rds()</code> y <code>read_rds()</code> proporcionan una buena alternativa para <a href="https://en.wikipedia.org/wiki/Serialization">serializar</a> tus objetos de <code>R</code> (por ejemplo, <code>tibbles</code>, modelos) y almacenarlos como archivos <code>.rds</code>.</p></li>
<li><p>Más info sobre <a href="https://mgimond.github.io/ES218/Week02b.html#Export_to_a_Rds_file">archivos rds</a></p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_rds</span>(<span class="at">file =</span> <span class="st">"./datos/penguins.rds"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="at">file =</span> <span class="st">"./datos/penguins.rds"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Nota que:</p>
<ul>
<li><p><code>write_rds()</code> solo puede utilizarse para guardar un objeto a la vez,</p></li>
<li><p>un archivo <code>.rds</code> cargado debe ser almacenado en una nueva variable, es decir, darle un nuevo nombre,</p></li>
<li><p><code>read_rds()</code> ¡conserva los tipos de datos!</p></li>
</ul>
</section>
<section id="ordenando-datos-tidyr" class="level3" data-number="1.7.5">
<h3 data-number="1.7.5" class="anchored" data-anchor-id="ordenando-datos-tidyr"><span class="header-section-number">1.7.5</span> Ordenando datos <code>tidyr</code></h3>
<ul>
<li>Podemos cambiar el formato de una tabla de datos con las funciones: <code>pivot_longer()</code> y <code>pivot_wider()</code> tal como se muestra en la siguiente figura.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/pivotting.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><span style="color: blue;">Ejemplo</span>: Tomamos la tabla de datos no tidy del Ejemplo 1 de estas notas y tratamos de estructurarla correctamente. La tabla la hemos llamado <code>ejemplo1</code> y os la presentamos a continuación:</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  species   Biscoe Dream Torgersen
  &lt;fct&gt;      &lt;int&gt; &lt;int&gt;     &lt;int&gt;
1 Adelie        44    56        52
2 Chinstrap     NA    68        NA
3 Gentoo       124    NA        NA</code></pre>
</div>
</div>
<p>Vamos a aplicar la función <code>pivot_longer</code> para hacerla tidy:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>nueva <span class="ot">&lt;-</span> ejemplo1 <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(Biscoe, Dream, Torgersen),</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"Isla"</span>, <span class="at">values_to =</span> <span class="st">"Frecuencia"</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>nueva</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
  species   Isla      Frecuencia
  &lt;fct&gt;     &lt;chr&gt;          &lt;int&gt;
1 Adelie    Biscoe            44
2 Adelie    Dream             56
3 Adelie    Torgersen         52
4 Chinstrap Biscoe            NA
5 Chinstrap Dream             68
6 Chinstrap Torgersen         NA
7 Gentoo    Biscoe           124
8 Gentoo    Dream             NA
9 Gentoo    Torgersen         NA</code></pre>
</div>
</div>
<ul>
<li><p>La función <code>pivot_wider()</code> invierte el efecto de <code>pivot_longer()</code>. Lo dejamos como <span style="color: red;"><em>Ejercicio</em></span></p></li>
<li><p>Puedes encontrar más información acerca de <code>pivot_*()</code> en <a href="https://tidyr.tidyverse.org/articles/pivot.html">tidyr</a>.</p></li>
<li><p>Otra cosa que podemos hacer con <code>tidyr</code> es “agrupar” datos de manera que cada grupo se convierte en una sola fila en un data frame. La función <code>nest()</code> genera datos anidados en un data frame con una fila por <code>species</code> y <code>year</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>nested_penguins <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">nest</span>(<span class="at">nested_data =</span> </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>           <span class="fu">c</span>(island, bill_length_mm, </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>             bill_depth_mm,flipper_length_mm,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>             body_mass_g, sex))</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>nested_penguins</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
  species    year nested_data      
  &lt;fct&gt;     &lt;int&gt; &lt;list&gt;           
1 Adelie     2007 &lt;tibble [50 × 6]&gt;
2 Adelie     2008 &lt;tibble [50 × 6]&gt;
3 Adelie     2009 &lt;tibble [52 × 6]&gt;
4 Gentoo     2007 &lt;tibble [34 × 6]&gt;
5 Gentoo     2008 &lt;tibble [46 × 6]&gt;
6 Gentoo     2009 &lt;tibble [44 × 6]&gt;
7 Chinstrap  2007 &lt;tibble [26 × 6]&gt;
8 Chinstrap  2008 &lt;tibble [18 × 6]&gt;
9 Chinstrap  2009 &lt;tibble [24 × 6]&gt;</code></pre>
</div>
</div>
<ul>
<li><p>Los datos anidados <code>nested_penguins</code> contienen <code>tibbles</code> con seis columnas cada uno y un número de observaciones que pueden ser distintos.</p></li>
<li><p>Los datos anidados son útiles si queremos aplicar funciones a cada subgrupo de datos (por ejemplo, comparar estadísticos por especie).</p></li>
<li><p>Para deshacer las estructuras de datos anidados se puede usar la función <code>tidyr::unnest()</code>.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>nested_penguins <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(nested_data)) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species  year island    bill_length_mm bill_depth_mm flipper_length_mm
   &lt;fct&gt;   &lt;int&gt; &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;
 1 Adelie   2007 Torgersen           39.1          18.7               181
 2 Adelie   2007 Torgersen           39.5          17.4               186
 3 Adelie   2007 Torgersen           40.3          18                 195
 4 Adelie   2007 Torgersen           NA            NA                  NA
 5 Adelie   2007 Torgersen           36.7          19.3               193
 6 Adelie   2007 Torgersen           39.3          20.6               190
 7 Adelie   2007 Torgersen           38.9          17.8               181
 8 Adelie   2007 Torgersen           39.2          19.6               195
 9 Adelie   2007 Torgersen           34.1          18.1               193
10 Adelie   2007 Torgersen           42            20.2               190
# ℹ 334 more rows
# ℹ 2 more variables: body_mass_g &lt;int&gt;, sex &lt;fct&gt;</code></pre>
</div>
</div>
<ul>
<li><span style="color: blue;">Ejemplo</span>: Dividir y combinar múltiples columnas en una sola.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">unite</span>(<span class="at">col =</span> <span class="st">"specie_sex"</span>,</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">c</span>(species, sex), <span class="at">sep =</span> <span class="st">"_"</span>, <span class="at">remove =</span> T)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 7
   specie_sex  island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;chr&gt;       &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie_male Torge…           39.1          18.7               181        3750
 2 Adelie_fem… Torge…           39.5          17.4               186        3800
 3 Adelie_fem… Torge…           40.3          18                 195        3250
 4 Adelie_NA   Torge…           NA            NA                  NA          NA
 5 Adelie_fem… Torge…           36.7          19.3               193        3450
 6 Adelie_male Torge…           39.3          20.6               190        3650
 7 Adelie_fem… Torge…           38.9          17.8               181        3625
 8 Adelie_male Torge…           39.2          19.6               195        4675
 9 Adelie_NA   Torge…           34.1          18.1               193        3475
10 Adelie_NA   Torge…           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 1 more variable: year &lt;int&gt;</code></pre>
</div>
</div>
<ul>
<li><span style="color: blue;">Ejemplo</span>: Separar una sola columna, que contiene varios valores, en varias columnas.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">separate</span>(bill_length_mm, <span class="at">sep =</span> <span class="dv">2</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cm"</span>, <span class="st">"mm"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 9
   species island  cm    mm    bill_depth_mm flipper_length_mm body_mass_g sex  
   &lt;fct&gt;   &lt;fct&gt;   &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt; &lt;fct&gt;
 1 Adelie  Torger… 39    ".1"           18.7               181        3750 male 
 2 Adelie  Torger… 39    ".5"           17.4               186        3800 fema…
 3 Adelie  Torger… 40    ".3"           18                 195        3250 fema…
 4 Adelie  Torger… &lt;NA&gt;  &lt;NA&gt;           NA                  NA          NA &lt;NA&gt; 
 5 Adelie  Torger… 36    ".7"           19.3               193        3450 fema…
 6 Adelie  Torger… 39    ".3"           20.6               190        3650 male 
 7 Adelie  Torger… 38    ".9"           17.8               181        3625 fema…
 8 Adelie  Torger… 39    ".2"           19.6               195        4675 male 
 9 Adelie  Torger… 34    ".1"           18.1               193        3475 &lt;NA&gt; 
10 Adelie  Torger… 42    ""             20.2               190        4250 &lt;NA&gt; 
# ℹ 334 more rows
# ℹ 1 more variable: year &lt;int&gt;</code></pre>
</div>
</div>
<ul>
<li><span style="color: blue;">Ejemplo</span>: Separar una sola columna, que contiene varios valores, en varias filas.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">separate_rows</span>(island, <span class="at">sep =</span> <span class="st">"s"</span>, <span class="at">convert =</span> T)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 564 × 8
   species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;chr&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torger           39.1          18.7               181        3750
 2 Adelie  en               39.1          18.7               181        3750
 3 Adelie  Torger           39.5          17.4               186        3800
 4 Adelie  en               39.5          17.4               186        3800
 5 Adelie  Torger           40.3          18                 195        3250
 6 Adelie  en               40.3          18                 195        3250
 7 Adelie  Torger           NA            NA                  NA          NA
 8 Adelie  en               NA            NA                  NA          NA
 9 Adelie  Torger           36.7          19.3               193        3450
10 Adelie  en               36.7          19.3               193        3450
# ℹ 554 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="manejo-de-nas" class="level3" data-number="1.7.6">
<h3 data-number="1.7.6" class="anchored" data-anchor-id="manejo-de-nas"><span class="header-section-number">1.7.6</span> <strong>Manejo de NAs</strong></h3>
<p>Supongamos que tenemos una tibble que llamamos <code>incompl_penguins</code> y queremos hacer explícitos los valores perdidos porque la tabla luce de la siguiente forma:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  species    year measurement
  &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;
1 Adelie     2007        41.6
2 Adelie     2008        46.5
3 Gentoo     2008        73.4
4 Chinstrap  2007        NA  </code></pre>
</div>
</div>
<p>Para hacer explícitos los NAs, ejecutamos las siguientes instrucciones:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>incompl_penguins <span class="sc">%&gt;%</span> </span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(species, year, <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">measurement =</span> <span class="cn">NA</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  species    year measurement
  &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;
1 Adelie     2007        41.6
2 Adelie     2008        46.5
3 Chinstrap  2007        NA  
4 Chinstrap  2008        NA  
5 Gentoo     2007        NA  
6 Gentoo     2008        73.4</code></pre>
</div>
</div>
<p>Si, por el contrario, queremos hacer implícitos los valores perdidos, ejecutamos la instrucción:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>incompl_penguins <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(measurement)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  species  year measurement
  &lt;chr&gt;   &lt;dbl&gt;       &lt;dbl&gt;
1 Adelie   2007        41.6
2 Adelie   2008        46.5
3 Gentoo   2008        73.4</code></pre>
</div>
</div>
<ul>
<li>Para reemplazar los valores faltantes por la entrada siguiente:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>incompl_penguins <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(measurement, <span class="at">.direction =</span> <span class="st">"down"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  species    year measurement
  &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;
1 Adelie     2007        41.6
2 Adelie     2008        46.5
3 Gentoo     2008        73.4
4 Chinstrap  2007        73.4</code></pre>
</div>
</div>
<ul>
<li>Reemplazar los valores que faltan por un valor predefinido.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>incompl_penguins <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(<span class="at">replace =</span> <span class="fu">list</span>(<span class="at">measurement =</span> <span class="fu">mean</span>(.<span class="sc">$</span>measurement, <span class="at">na.rm =</span> T)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  species    year measurement
  &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;
1 Adelie     2007        41.6
2 Adelie     2008        46.5
3 Gentoo     2008        73.4
4 Chinstrap  2007        53.8</code></pre>
</div>
</div>
<ul>
<li><p>Más información en la <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/master/data-import.pdf">Hoja de trucos de <code>tidyr</code></a>.</p></li>
<li><p><span style="color: red;">Recordad</span>: Los argumentos de una función precedidos por un punto en el tidyverse pueden deberse a dos razones:</p>
<ul>
<li><p>La función es todavía una versión no acabada, es decir, los desarrolladores aún piensan en la mejor manera de implementar y nombrar la función.</p></li>
<li><p>La función se aplica regularmente dentro de otra función para no confundir los argumentos de la función interna y la externa.</p></li>
</ul></li>
</ul>
<p><br></p>
</section>
<section id="manipulación-de-datos-dplyr" class="level3" data-number="1.7.7">
<h3 data-number="1.7.7" class="anchored" data-anchor-id="manipulación-de-datos-dplyr"><span class="header-section-number">1.7.7</span> Manipulación de datos <code>dplyr</code></h3>
<p><code>dplyr</code> proporciona un conjunto de funciones para manipular objetos <code>tibbles</code>. Las funciones están representadas por “acciones” que reflejan las operaciones subyacentes y siempre dan como resultado un <code>tibble</code> nuevo o modificado.</p>
<section id="operaciones-por-filas" class="level4" data-number="1.7.7.1">
<h4 data-number="1.7.7.1" class="anchored" data-anchor-id="operaciones-por-filas"><span class="header-section-number">1.7.7.1</span> <strong>Operaciones por filas</strong></h4>
<ul>
<li><p><code>filter()</code> selecciona las filas que cumplen uno o varios criterios lógicos</p></li>
<li><p><code>slice()</code> selecciona las filas en función de su ubicación en los datos</p></li>
<li><p><code>arrange()</code> cambia el orden de las filas</p></li>
</ul>
<p><span style="color: blue;">Ejemplo</span>: Seleccionar un data frame con los pingüinos de la especie “Adelie”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Adelie"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 152 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 142 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Encontrar los pingüinos con NAs en la variable <code>bill_length_mm</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(bill_length_mm) <span class="sc">==</span> T)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen             NA            NA                NA          NA
2 Gentoo  Biscoe                NA            NA                NA          NA
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Seleccionar los pingüinos observados antes del año 2008 o después del año 2008 y que tienen masa corporal entre 3800 y 4000 gramos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(body_mass_g, <span class="dv">3800</span>, <span class="dv">4000</span>) <span class="sc">&amp;</span> (year <span class="sc">&lt;</span> <span class="dv">2008</span> <span class="sc">|</span> year <span class="sc">&gt;</span> <span class="dv">2008</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 28 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.5          17.4               186        3800
 2 Adelie  Torgersen           38.6          21.2               191        3800
 3 Adelie  Biscoe              35.9          19.2               189        3800
 4 Adelie  Biscoe              38.2          18.1               185        3950
 5 Adelie  Biscoe              38.8          17.2               180        3800
 6 Adelie  Biscoe              35.3          18.9               187        3800
 7 Adelie  Biscoe              40.5          18.9               180        3950
 8 Adelie  Dream               37.2          18.1               178        3900
 9 Adelie  Dream               40.9          18.9               184        3900
10 Adelie  Dream               38.8          20                 190        3950
# ℹ 18 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Seleccionar los pingüinos de acuerdo a su ubicación.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">23</span><span class="sc">:</span><span class="dv">27</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  species island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Biscoe           35.9          19.2               189        3800
2 Adelie  Biscoe           38.2          18.1               185        3950
3 Adelie  Biscoe           38.8          17.2               180        3800
4 Adelie  Biscoe           35.3          18.9               187        3800
5 Adelie  Biscoe           40.6          18.6               183        3550
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Seleccionar los 5 primeros pingüinos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
3 Adelie  Torgersen           40.3          18                 195        3250
4 Adelie  Torgersen           NA            NA                  NA          NA
5 Adelie  Torgersen           36.7          19.3               193        3450
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># alternativamente: </span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="co">#slice_head(frac = 0.05)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Seleccionar una muestra aleatoria de <code>n</code> pingüinos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  species   island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;     &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Chinstrap Dream               52.8          20                 205        4550
2 Adelie    Torgersen           37.3          20.5               199        3775
3 Chinstrap Dream               43.2          16.6               187        2900
4 Gentoo    Biscoe              47.5          14.2               209        4600
5 Gentoo    Biscoe              52.2          17.1               228        5400
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<ul>
<li><span style="color: blue;">Ejemplo</span>: Seleccionar los <code>n</code> pingüinos con el pico más grande.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(bill_length_mm, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;     &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Gentoo    Biscoe           59.6          17                 230        6050
2 Chinstrap Dream            58            17.8               181        3700
3 Gentoo    Biscoe           55.9          17                 228        5600
4 Chinstrap Dream            55.8          19.8               207        4000
5 Gentoo    Biscoe           55.1          16                 230        5850
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Seleccionar los cinco pingüinos con menor masa corporal.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(body_mass_g) <span class="sc">%&gt;%</span> </span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)  <span class="co"># equivalentente a: slice_min(body_mass_g, n = 3)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
  species   island bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;     &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Chinstrap Dream            46.9          16.6               192        2700
2 Adelie    Biscoe           36.5          16.6               181        2850
3 Adelie    Biscoe           36.4          17.1               184        2850
4 Adelie    Biscoe           34.5          18.1               187        2900
5 Adelie    Dream            33.1          16.1               178        2900
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="operaciones-por-columnas" class="level4" data-number="1.7.7.2">
<h4 data-number="1.7.7.2" class="anchored" data-anchor-id="operaciones-por-columnas"><span class="header-section-number">1.7.7.2</span> <strong>Operaciones por columnas</strong></h4>
<ul>
<li><p><code>select()</code> selecciona determinadas columnas</p></li>
<li><p><code>rename()</code> cambia los nombres de las columnas</p></li>
<li><p><code>relocate()</code> cambia el orden de las columnas</p></li>
<li><p><code>mutate()</code> transforma los valores de las columnas y/o crea nuevas columnas</p></li>
</ul>
<p><span style="color: blue;">Ejemplo</span>: Selección por número de la(s) columna(s)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  glimpse</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 3
$ species        &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adelie,…
$ island         &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgersen, …
$ bill_length_mm &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.…</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Selección por nombre de la(s) columna(s)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species, island, bill_length_mm) <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  glimpse</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 3
$ species        &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adelie,…
$ island         &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgersen, …
$ bill_length_mm &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.…</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Seleccionar todas las columnas</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  glimpse</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 8
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># select(last_col())</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Seleccionar las columnas cuyos nombres empiezan por un patrón específico</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"bill"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  glimpse</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 2
$ bill_length_mm &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, 42.…
$ bill_depth_mm  &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, 20.…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ends_with()</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"e"</span>) <span class="sc">&amp;</span> <span class="fu">contains</span>(<span class="st">"a"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  glimpse</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 1
$ year &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007,…</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Seleccionar columnas en base a una expresión regular (<a href="https://www.rexegg.com/regex-quickstart.html">regex</a>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">matches</span>(<span class="st">"_</span><span class="sc">\\</span><span class="st">w*_mm$"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>  glimpse</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 3
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>  glimpse</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 5
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…</code></pre>
</div>
</div>
<ul>
<li><span style="color: red;">Ejercicio</span>: ¿Qué columnas devuelven las siguientes consultas?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"mm"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">contains</span>(<span class="st">"mm"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="fu">is.numeric</span>(.))) <span class="sc">%&gt;%</span>  <span class="co"># select(where(is.numeric))</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="fu">mean</span>(., <span class="at">na.rm =</span> T) <span class="sc">&gt;</span> <span class="dv">1000</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Cambiar el nombre de la columna <code>body_mass_g</code> a bm y <code>sex</code> a gender.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">bm =</span> body_mass_g, <span class="at">gender =</span> sex) <span class="sc">%&gt;%</span> </span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "species"           "island"            "bill_length_mm"   
[4] "bill_depth_mm"     "flipper_length_mm" "bm"               
[7] "gender"            "year"             </code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Cambiar los nombres de las columnas que incluyen <code>"mm"</code> a mayúsculas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">rename_with</span>(<span class="at">.fn =</span> toupper, <span class="at">.cols =</span> <span class="fu">contains</span>(<span class="st">"mm"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "species"           "island"            "BILL_LENGTH_MM"   
[4] "BILL_DEPTH_MM"     "FLIPPER_LENGTH_MM" "body_mass_g"      
[7] "sex"               "year"             </code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Cambiar el orden de las columnas en la <code>tibble</code> de acuerdo al siguiente esquema:</p>
<ol type="1">
<li>colocar “especie” después de “masa corporal”.</li>
<li>colocar “sexo” antes de “especie”.</li>
<li>colocar “isla” al final</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(species, <span class="at">.after =</span> body_mass_g) <span class="sc">%&gt;%</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(sex, <span class="at">.before =</span> species) <span class="sc">%&gt;%</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(island, <span class="at">.after =</span> <span class="fu">last_col</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bill_length_mm"    "bill_depth_mm"     "flipper_length_mm"
[4] "body_mass_g"       "sex"               "species"          
[7] "year"              "island"           </code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Crear una nueva variable <code>bm_kg</code> que ponga <code>body_mass_g</code> en kilogramos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bm_kg =</span> body_mass_g<span class="sc">/</span><span class="dv">1000</span>, <span class="at">.keep =</span> <span class="st">"all"</span>, <span class="at">.after =</span> island) <span class="sc">%&gt;%</span> </span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 9
  species island    bm_kg bill_length_mm bill_depth_mm flipper_length_mm
  &lt;fct&gt;   &lt;fct&gt;     &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;
1 Adelie  Torgersen  3.75           39.1          18.7               181
2 Adelie  Torgersen  3.8            39.5          17.4               186
3 Adelie  Torgersen  3.25           40.3          18                 195
4 Adelie  Torgersen NA              NA            NA                  NA
5 Adelie  Torgersen  3.45           36.7          19.3               193
# ℹ 3 more variables: body_mass_g &lt;int&gt;, sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<ul>
<li>Usamos <code>.keep</code> para especificar las columnas que se mantendrán después de la manipulación.</li>
<li>Usamos <code>.before</code>/<code>.after</code> para especificar la posición de la nueva columna.</li>
<li>Para anular una columna dada simplemente utiliza el mismo nombre de columna.</li>
<li>Para mantener únicamente la nueva columna utiliza <code>dplyr::transmute()</code>.</li>
</ul>
<p><span style="color: blue;">Ejemplo</span>: Codificación de una variable categórica con “C” niveles de factor en “C-1” binarias o dummies.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex_binary =</span> <span class="fu">case_when</span>(</span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>      sex <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>      sex <span class="sc">==</span> <span class="st">"female"</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"all"</span>, <span class="at">.after =</span> island</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 9
  species island    sex_binary bill_length_mm bill_depth_mm flipper_length_mm
  &lt;fct&gt;   &lt;fct&gt;          &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;
1 Adelie  Torgersen          1           39.1          18.7               181
2 Adelie  Torgersen          0           39.5          17.4               186
3 Adelie  Torgersen          0           40.3          18                 195
# ℹ 3 more variables: body_mass_g &lt;int&gt;, sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>:</p>
<p><code>case_when</code>: - Versión vectorizada de if_else</p>
<ul>
<li><p>Fórmulas de dos lados: El LHS comprueba la condición, el RHS especifica el valor de sustitución</p></li>
<li><p>Para los casos no coincidentes, la función devuelve NA</p></li>
<li><p>Utiliza el LHS <code>TRUE</code> para capturar todos los casos no especificados explícitamente de antemano.</p></li>
</ul>
<p><span style="color: blue;">Ejemplo</span>: Transformar las variables de medidas a metros</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">contains</span>(<span class="st">"mm"</span>), <span class="sc">~</span> .<span class="sc">/</span><span class="dv">1000</span>),</span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"all"</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;dbl&gt;       &lt;int&gt;
1 Adelie  Torgersen         0.0391        0.0187             0.181        3750
2 Adelie  Torgersen         0.0395        0.0174             0.186        3800
3 Adelie  Torgersen         0.0403        0.018              0.195        3250
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>:</p>
<p><code>across</code>:</p>
<ul>
<li><p>Aplicar la misma transformación en varias columnas</p></li>
<li><p>Te permite utilizar la semántica que conoces de la función <code>select()</code>.</p></li>
<li><p>No requiere que se especifique explícitamente un nombre de columna, ya que sólo transforma las columnas existentes</p></li>
</ul>
<p><span style="color: blue;">Ejemplo</span>: Definir <code>species</code>, <code>island</code> y <code>sex</code> como variables categóricas, es decir factores, usando <code>across()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">where</span>(is.character), as.factor),</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">.keep =</span> <span class="st">"all"</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 8
  species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie  Torgersen           39.1          18.7               181        3750
2 Adelie  Torgersen           39.5          17.4               186        3800
3 Adelie  Torgersen           40.3          18                 195        3250
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="operaciones-sobre-datos-agrupados" class="level4" data-number="1.7.7.3">
<h4 data-number="1.7.7.3" class="anchored" data-anchor-id="operaciones-sobre-datos-agrupados"><span class="header-section-number">1.7.7.3</span> <strong>Operaciones sobre datos agrupados</strong></h4>
<ul>
<li><p><code>group_by()</code> divide los datos en función de una o varias columnas</p></li>
<li><p><code>summarise()</code> reduce un grupo de datos en una sola fila</p></li>
</ul>
<p><span style="color: blue;">Ejemplo</span>: Partición de los datos por tipo de especie del pingüino</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(species)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
# Groups:   species [3]
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p>Utiliza <code>group_keys()</code>, <code>group_indices()</code> y <code>group_vars()</code> para acceder a las claves de agrupación, los índices de grupo por fila y las variables de agrupación.</p>
<ul>
<li><code>group_by()</code> cambia la representación del <code>tibble</code> y lo transforma en un data frame agrupado (<code>grouped_df</code>). Esto nos permite operar en los subgrupos individualmente usando <code>summarise()</code>.</li>
</ul>
<p><span style="color: blue;">Ejemplo</span>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  species   count
  &lt;fct&gt;     &lt;int&gt;
1 Adelie      152
2 Chinstrap    68
3 Gentoo      124</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(species, sex) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 3
  species   sex    count
  &lt;fct&gt;     &lt;fct&gt;  &lt;int&gt;
1 Adelie    female    73
2 Adelie    male      73
3 Adelie    &lt;NA&gt;       6
4 Chinstrap female    34
5 Chinstrap male      34
6 Gentoo    female    58
7 Gentoo    male      61
8 Gentoo    &lt;NA&gt;       5</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">contains</span>(<span class="st">"mm"</span>), <span class="sc">~</span> <span class="fu">mean</span>(., <span class="at">na.rm =</span> T), <span class="at">.names =</span> <span class="st">"{.col}_media"</span>),</span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
  species   bill_length_mm_media bill_depth_mm_media flipper_length_mm_media
  &lt;fct&gt;                    &lt;dbl&gt;               &lt;dbl&gt;                   &lt;dbl&gt;
1 Adelie                    38.8                18.3                    190.
2 Chinstrap                 48.8                18.4                    196.
3 Gentoo                    47.5                15.0                    217.</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>Utilizar <code>group_by()</code>, seguido de <code>summarise()</code> y <code>ungroup()</code> refleja el paradigma <strong>dividir-aplicar-combinar</strong> del análisis de datos: Dividir los datos en particiones, aplicar alguna función a los datos y luego combinar los resultados.</p>
</blockquote>
<ul>
<li><code>.add = T</code> permite añadir nuevas variables de agrupación (si no, se anula la primera)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, <span class="at">.add =</span> T)   <span class="co"># equivalente a: group_by(species, year)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
# Groups:   species, year [9]
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">contains</span>(<span class="st">"mm"</span>),</span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">list</span>(<span class="at">media =</span> <span class="sc">~</span> <span class="fu">mean</span>(., <span class="at">na.rm =</span> T), <span class="at">sd =</span> <span class="sc">~</span> <span class="fu">sd</span>(., <span class="at">na.rm =</span> T)),</span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">"{.col}_{.fn}"</span></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 7
  species   bill_length_mm_media bill_length_mm_sd bill_depth_mm_media
  &lt;fct&gt;                    &lt;dbl&gt;             &lt;dbl&gt;               &lt;dbl&gt;
1 Adelie                    38.8              2.66                18.3
2 Chinstrap                 48.8              3.34                18.4
3 Gentoo                    47.5              3.08                15.0
# ℹ 3 more variables: bill_depth_mm_sd &lt;dbl&gt;, flipper_length_mm_media &lt;dbl&gt;,
#   flipper_length_mm_sd &lt;dbl&gt;</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Las funciones de resumen, por ejemplo, <code>mean()</code> o <code>sd()</code> operan en particiones de los datos en lugar de en los datos completos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> </span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stand_bm =</span> (body_mass_g <span class="sc">-</span> <span class="fu">mean</span>(body_mass_g, <span class="at">na.rm =</span> T))</span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>         <span class="sc">/</span><span class="fu">sd</span>(body_mass_g, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>  glimpse</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 9
Groups: species [3]
$ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…
$ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Torgersen, Torgerse…
$ bill_length_mm    &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34.1, …
$ bill_depth_mm     &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18.1, …
$ flipper_length_mm &lt;int&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190, 186…
$ body_mass_g       &lt;int&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 3475, …
$ sex               &lt;fct&gt; male, female, female, NA, female, male, female, male…
$ year              &lt;int&gt; 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007, 2007…
$ stand_bm          &lt;dbl&gt; 0.107591350, 0.216626878, -0.982763938, NA, -0.54662…</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Calcular franjas para la masa corporal de acuerdo a la cantidad de desviaciones estándar de la media. Agrupar los datos según estos intervalos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>bm_breaks <span class="ot">&lt;-</span> <span class="fu">mean</span>(penguins<span class="sc">$</span>body_mass_g, </span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">na.rm =</span> T) <span class="sc">-</span> (<span class="sc">-</span><span class="dv">3</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">*</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sd</span>(penguins<span class="sc">$</span>body_mass_g,<span class="at">na.rm =</span> T)</span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, <span class="at">bm_bin =</span> <span class="fu">cut</span>(body_mass_g, <span class="at">breaks =</span> bm_breaks)) <span class="sc">%&gt;%</span></span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
   species   bm_bin              count
   &lt;fct&gt;     &lt;fct&gt;               &lt;int&gt;
 1 Adelie    (2.6e+03,3.4e+03]      39
 2 Adelie    (3.4e+03,4.2e+03]      87
 3 Adelie    (4.2e+03,5e+03]        25
 4 Adelie    &lt;NA&gt;                    1
 5 Chinstrap (2.6e+03,3.4e+03]      11
 6 Chinstrap (3.4e+03,4.2e+03]      50
 7 Chinstrap (4.2e+03,5e+03]         7
 8 Gentoo    (3.4e+03,4.2e+03]       6
 9 Gentoo    (4.2e+03,5e+03]        56
10 Gentoo    (5e+03,5.81e+03]       52
11 Gentoo    (5.81e+03,6.61e+03]     9
12 Gentoo    &lt;NA&gt;                    1</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Filtrar en las particiones en lugar de en la totalidad de los datos</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, island) <span class="sc">%&gt;%</span> </span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(flipper_length_mm <span class="sc">==</span> <span class="fu">max</span>(flipper_length_mm, <span class="at">na.rm =</span> T))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 8
# Groups:   species, island [5]
  species   island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
  &lt;fct&gt;     &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
1 Adelie    Dream               40.8          18.9               208        4300
2 Adelie    Biscoe              41            20                 203        4725
3 Adelie    Torgersen           44.1          18                 210        4000
4 Gentoo    Biscoe              54.3          15.7               231        5650
5 Chinstrap Dream               49            19.6               212        4300
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
<p><span style="color: blue;">Ejemplo</span>: Utilizar <code>group_by()</code> seguido de <code>nest()</code> para producir un data frame anidado</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, year) <span class="sc">%&gt;%</span> </span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">nest</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 3
# Groups:   species, year [9]
  species    year data             
  &lt;fct&gt;     &lt;int&gt; &lt;list&gt;           
1 Adelie     2007 &lt;tibble [50 × 6]&gt;
2 Adelie     2008 &lt;tibble [50 × 6]&gt;
3 Adelie     2009 &lt;tibble [52 × 6]&gt;
4 Gentoo     2007 &lt;tibble [34 × 6]&gt;
5 Gentoo     2008 &lt;tibble [46 × 6]&gt;
6 Gentoo     2009 &lt;tibble [44 × 6]&gt;
7 Chinstrap  2007 &lt;tibble [26 × 6]&gt;
8 Chinstrap  2008 &lt;tibble [18 × 6]&gt;
9 Chinstrap  2009 &lt;tibble [24 × 6]&gt;</code></pre>
</div>
</div>
<p>Puedes encontrar más información de <code>group_by()</code> ejecutando <code>vignette("grouping")</code>.</p>
</section>
<section id="otras-operaciones-con-dlpyr" class="level4" data-number="1.7.7.4">
<h4 data-number="1.7.7.4" class="anchored" data-anchor-id="otras-operaciones-con-dlpyr"><span class="header-section-number">1.7.7.4</span> <strong>Otras operaciones con <code>dlpyr</code></strong></h4>
<ul>
<li><code>distinct()</code> selecciona sólo filas únicas</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(species, island)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  species   island   
  &lt;fct&gt;     &lt;fct&gt;    
1 Adelie    Torgersen
2 Adelie    Biscoe   
3 Adelie    Dream    
4 Gentoo    Biscoe   
5 Chinstrap Dream    </code></pre>
</div>
</div>
<ul>
<li><code>pull()</code> extrae columnas individuales como vectores</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(year)  <span class="co"># equivalente a: penguins$year</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>if_else()</code> sentencia if-else vectorizada.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">select</span>(species, island, body_mass_g) <span class="sc">%&gt;%</span> </span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">penguin_size =</span> <span class="fu">if_else</span>(body_mass_g <span class="sc">&lt;</span> <span class="dv">3500</span>,</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"pequeño"</span>,</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"grande"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   species island    body_mass_g penguin_size
   &lt;fct&gt;   &lt;fct&gt;           &lt;int&gt; &lt;chr&gt;       
 1 Adelie  Torgersen        3750 grande      
 2 Adelie  Torgersen        3800 grande      
 3 Adelie  Torgersen        3250 pequeño     
 4 Adelie  Torgersen          NA &lt;NA&gt;        
 5 Adelie  Torgersen        3450 pequeño     
 6 Adelie  Torgersen        3650 grande      
 7 Adelie  Torgersen        3625 grande      
 8 Adelie  Torgersen        4675 grande      
 9 Adelie  Torgersen        3475 pequeño     
10 Adelie  Torgersen        4250 grande      
# ℹ 334 more rows</code></pre>
</div>
</div>
<ul>
<li><code>lag()</code> desplaza los valores de las columnas <code>n</code> posiciones hacia adelante</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">select</span>(species, body_mass_g) <span class="sc">%&gt;%</span> </span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lagged_bm =</span> <span class="fu">lag</span>(body_mass_g, <span class="at">n =</span> <span class="dv">1</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 3
   species body_mass_g lagged_bm
   &lt;fct&gt;         &lt;int&gt;     &lt;int&gt;
 1 Adelie         3750        NA
 2 Adelie         3800      3750
 3 Adelie         3250      3800
 4 Adelie           NA      3250
 5 Adelie         3450        NA
 6 Adelie         3650      3450
 7 Adelie         3625      3650
 8 Adelie         4675      3625
 9 Adelie         3475      4675
10 Adelie         4250      3475
# ℹ 334 more rows</code></pre>
</div>
</div>
<ul>
<li>Combinar diferentes data frames haciendo coincidir las filas en función de la “key”</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/combinar_tablas.PNG" class="img-fluid figure-img" style="width:40.0%"></p>
</figure>
</div>
</div>
</div>
<p><span style="color: red;">Nota</span></p>
<ul>
<li>En el enlace de <a href="https://tidydatatutor.com/">Tidydatatutor</a> puedes escribir código R y Tidyverse en tu navegador y ver cómo cambia el data frame en cada paso del pipeline que has escrito.</li>
</ul>
<p>Aquí os dejamos el enlace para visualizar las instrucciones más utilizadas de tidyverse con el ejemplo de los pingüinos:</p>
<ul>
<li><p><a href="https://tidydatatutor.com/vis.html#trace=example-code/r_arrange.json">arrange()</a></p></li>
<li><p><a href="https://tidydatatutor.com/vis.html#trace=example-code/r_filter.json">filter()</a></p></li>
<li><p><a href="https://tidydatatutor.com/vis.html#trace=example-code/r_mutate.json">mutate()</a></p></li>
<li><p><a href="https://tidydatatutor.com/vis.html#trace=example-code/r_select.json">select()</a></p></li>
<li><p><a href="https://tidydatatutor.com/vis.html#trace=example-code/r_grouped_slice.json">group_by() %&gt;% slice()</a></p></li>
<li><p><a href="https://tidydatatutor.com/vis.html#trace=example-code/r_grouped_summarise.json">group_by() %&gt;% summarize()</a></p></li>
</ul>
</section>
</section>
<section id="visualización-de-datos-ggplot2" class="level3" data-number="1.7.8">
<h3 data-number="1.7.8" class="anchored" data-anchor-id="visualización-de-datos-ggplot2"><span class="header-section-number">1.7.8</span> Visualización de datos <code>ggplot2</code></h3>
<p><code>ggplot2</code> es un sistema para crear gráficos de forma declarativa, basado en <a href="https://link.springer.com/chapter/10.1007/978-3-642-21551-3_13">The Grammar of Graphics</a>. Permite producir “gráficos modernos para el análisis de datos”.</p>
<p>La sintaxis de ggplot2 ayuda a pensar los gráficos de una manera nueva y más general que R base, por ejemplo, facilita el agregar las leyendas, los ejes, los colores, en comparación con R base.</p>
<p>En <a href="https://r-graph-gallery.com/">R gallery</a>, <a href="https://r-charts.com">R charts</a> y en <a href="https://exts.ggplot2.tidyverse.org/gallery/">ggplot2 extensions</a> puedes encontrar muchos ejemplos de gráficos con los códigos que os servirán de inspiración.</p>
</section>
<section id="gramática-básica-de-ggplot2" class="level3" data-number="1.7.9">
<h3 data-number="1.7.9" class="anchored" data-anchor-id="gramática-básica-de-ggplot2"><span class="header-section-number">1.7.9</span> Gramática básica de <code>ggplot2</code></h3>
<p><strong>Un ggplot necesita al menos tres cosas que hay que especificar: </strong></p>
<ul>
<li><p><strong>Datos</strong>: Normalmente un <code>tibble</code> del que se seleccionan las variables a visualizar. Siempre empezamos con <strong><code>ggplot(data = df)</code></strong> que le dice a <code>{ggplot2}</code> que vamos a trabajar con los datos <code>df</code>.</p></li>
<li><p><strong>Estética</strong>: Propiedades visuales que deseamos tenga nuestro gráfico. Por ejemplo, si deseamos visualizar la relación entre dos variables de <code>df</code>: <code>var1</code> en el eje <code>x</code> y <code>var2</code> en el eje <code>y</code>, debemos especificar: <strong><code>aes(x = var1, y = var2)</code></strong>.</p></li>
<li><p><strong>Geometría</strong>: Forma geométrica que deseamos utilizar para representar los datos: puntos, líneas continuas, curvas, entre otras. Se especifica con <strong><code>geom_*()</code></strong>. Por ejemplo, <code>geom_point()</code> para hacer un diagrama de puntos.</p></li>
</ul>
<p><span style="color: blue;">Ejemplo</span>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>bill_length_mm, <span class="at">y =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-98-1.png" style="width:60.0%;height:60.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="más-elementos-de-la-gramática" class="level3" data-number="1.7.10">
<h3 data-number="1.7.10" class="anchored" data-anchor-id="más-elementos-de-la-gramática"><span class="header-section-number">1.7.10</span> Más elementos de la gramática …</h3>
<ul>
<li><strong>Escalas</strong>: Permiten asignar los valores que hay en los datos a los valores visuales de una estética (anulando los valores por defecto de esa estética). La sintáxis es <strong><code>scale_*()</code></strong>. Existen escalas para asignar valores de manera discreta, continua o manual. También escalas de localización, para color, relleno; tamaño y figuras.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/escalas.PNG" style="width:70.0%;height:60.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Resúmenes</strong>: Permiten construir nuevas variables de resumen para hacer un gráfico. Por ejemplo: conteo, cuantiles, proporciones, curvas ajustadas. Se especifica con <strong><code>stat_*()</code></strong>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/stats.PNG" style="width:70.0%;height:60.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Sistema de coordenadas</strong>: Permite especificar cómo deseamos las coordenadas del gráfico. La sintáxis es <strong><code>coord_*</code></strong>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/coordenadas.PNG" style="width:40.0%;height:50.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Facetas</strong>: Dividen un gráfico en múltiples subgráficos de acuerdo a una o varias variables discretas. La sintáxis es <strong><code>facet_*</code></strong>.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/facetas.PNG" style="width:40.0%;height:50.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Ajustes de las posiciones</strong>: Permite indicar qué hacer con geometrías (geoms) que ocuparían la misma posición en el gráfico.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/posicion.PNG" style="width:40.0%;height:50.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><strong>Tema</strong>: Valores visuales generales de un gráfico, como el fondo, las cuadrículas, los ejes, el tipo de letra predeterminado, los tamaños y los colores.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/temas.PNG" style="width:40.0%;height:40.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Hay muchas cosas más, puedes descargar la <a href="https://diegokoz.github.io/intro_ds/fuentes/ggplot2-cheatsheet-2.1-Spanish.pdf">hoja de trucos de ggplot2</a> en castellano.</p>
</section>
<section id="visualizando-una-variable-cualitativa-con-ggplot2" class="level3" data-number="1.7.11">
<h3 data-number="1.7.11" class="anchored" data-anchor-id="visualizando-una-variable-cualitativa-con-ggplot2"><span class="header-section-number">1.7.11</span> Visualizando una variable cualitativa con ggplot2</h3>
<p>Vamos a visualizar una variable cualitativa, con un tema que no es el que trae por defecto ggplot con fondo gris.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill=</span><span class="st">"blue"</span>) <span class="sc">+</span> </span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Especie"</span>, <span class="at">y=</span><span class="st">"Número de pingüinos"</span>) <span class="sc">+</span></span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>)) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-105-1.png" style="width:60.0%;height:60.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="cruzando-dos-variables-cualitativas-con-ggplot2" class="level3" data-number="1.7.12">
<h3 data-number="1.7.12" class="anchored" data-anchor-id="cruzando-dos-variables-cualitativas-con-ggplot2"><span class="header-section-number">1.7.12</span> Cruzando dos variables cualitativas con ggplot2</h3>
<p>Para observar la distribución conjunta de dos variables cualitativas podemos emplear un gráfico de barras. Las siguientes instrucciones nos ayudan a visualizar la relación entre las variables <code>species</code> e <code>island</code> del conjunto de datos de los pingüinos.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(species, <span class="at">fill=</span>island),</span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">position=</span><span class="st">"dodge"</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Isla"</span>)) <span class="sc">+</span></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Número de pingüinos"</span>, <span class="at">y=</span><span class="st">"Especie"</span>) <span class="sc">+</span></span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>)) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-107-1.png" style="width:60.0%;height:60.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Si deseamos que cada barra represente el 100% de la categoría, se indica en el argumento de geom_bar.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(species, <span class="at">fill=</span>island),</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">position=</span><span class="st">"fill"</span>) <span class="sc">+</span> <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Isla"</span>)) <span class="sc">+</span></span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y=</span><span class="st">"Proporción de pingüinos"</span>, <span class="at">x=</span><span class="st">"Especie"</span>) <span class="sc">+</span></span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-108-1.png" style="width:60.0%;height:60.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="visualizando-una-variable-cuantitativa-con-ggplot2" class="level3" data-number="1.7.13">
<h3 data-number="1.7.13" class="anchored" data-anchor-id="visualizando-una-variable-cuantitativa-con-ggplot2"><span class="header-section-number">1.7.13</span> Visualizando una variable cuantitativa con ggplot2</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span> </span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Longitud de la aleta en mm"</span>, </span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">y=</span><span class="st">"Frecuencia absoluta"</span>) <span class="sc">+</span> </span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-109-1.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="cruzando-una-variable-cuantitativa-con-una-cualitativa" class="level3" data-number="1.7.14">
<h3 data-number="1.7.14" class="anchored" data-anchor-id="cruzando-una-variable-cuantitativa-con-una-cualitativa"><span class="header-section-number">1.7.14</span> Cruzando una variable cuantitativa con una cualitativa</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">fill =</span> species), </span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, </span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position =</span> <span class="st">"identity"</span>,</span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>,<span class="st">"purple"</span>,<span class="st">"cyan4"</span>)) <span class="sc">+</span></span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitud de la aleta en mm"</span>,</span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frecuencia absoluta"</span>) <span class="sc">+</span></span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Especie"</span>)) <span class="sc">+</span></span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb168-12"><a href="#cb168-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb168-13"><a href="#cb168-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-111-1.png" style="width:60.0%;height:60.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Para que el gráfico sea más claro, se los puede separar con facetas: <code>facet_grid(.~species)</code> justo después de la capa geom_histogram.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">fill =</span> species), </span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.5</span>, </span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position =</span> <span class="st">"identity"</span>,</span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(.<span class="sc">~</span>species) <span class="sc">+</span></span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>,<span class="st">"purple"</span>,<span class="st">"cyan4"</span>)) <span class="sc">+</span></span>
<span id="cb169-8"><a href="#cb169-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Longitud de la aleta en mm"</span>,</span>
<span id="cb169-9"><a href="#cb169-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frecuencia absoluta"</span>) <span class="sc">+</span></span>
<span id="cb169-10"><a href="#cb169-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Especie"</span>)) <span class="sc">+</span></span>
<span id="cb169-11"><a href="#cb169-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb169-12"><a href="#cb169-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb169-13"><a href="#cb169-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb169-14"><a href="#cb169-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-112-1.png" style="width:60.0%;height:60.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>La capa <code>facet_grid</code> admite dos variables como argumento, separadas por ~, las categorías de la primera definen las filas y las de la segunda, las columnas. Si solo se usa una, se ubica un punto en el lugar de la otra.</p></li>
<li><p>Otra forma muy conveniente de cruzar una variable cuantitativa con otra cualitativa es usando boxplots.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> penguins, <span class="fu">aes</span>(<span class="at">x =</span> species, <span class="at">y =</span> flipper_length_mm)) <span class="sc">+</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color =</span> species), <span class="at">width =</span> <span class="fl">0.3</span>, </span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">color =</span> species), <span class="at">alpha =</span> <span class="fl">0.5</span>, </span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">show.legend =</span> <span class="cn">FALSE</span>, </span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">seed =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"darkorange"</span>,<span class="st">"purple"</span>,<span class="st">"cyan4"</span>)) <span class="sc">+</span></span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Epecie"</span>, <span class="at">y =</span> <span class="st">"Longitud de la aleta en mm"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-114-1.png" style="width:60.0%;height:50.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="cruzando-dos-variables-cuantitativas" class="level4" data-number="1.7.14.1">
<h4 data-number="1.7.14.1" class="anchored" data-anchor-id="cruzando-dos-variables-cuantitativas"><span class="header-section-number">1.7.14.1</span> Cruzando dos variables cuantitativas</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(penguins) <span class="sc">+</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">y =</span> body_mass_g,</span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">color =</span> sex), <span class="at">size=</span><span class="dv">3</span>)<span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>)) <span class="sc">+</span> </span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Sexo"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-116-1.png" style="width:60.0%;height:60.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="códigos-de-color-html" class="level4" data-number="1.7.14.2">
<h4 data-number="1.7.14.2" class="anchored" data-anchor-id="códigos-de-color-html"><span class="header-section-number">1.7.14.2</span> Códigos de color html</h4>
<ul>
<li><p>Para utilizar colores personalizados, puedes consultar los <a href="https://www.w3schools.com/colors/colors_picker.asp">códigos de color HTML</a> (también llamados <em>códigos hexadecimales</em>, por ejemplo, <code>#ff0000</code> para el rojo) en lugar de especificar los colores por su <a href="http://sape.inf.usi.ch/quick-reference/ggplot2/colour">nombre predefinido</a> en <code>R</code>.</p></li>
<li><p>La familia de funciones <code>scale_colour_*()</code> permite ajustar los valores de la estética <code>color</code> (por ejemplo, <code>scale_colour_brewer()</code> selecciona una paleta del famoso proyecto <a href="https://colorbrewer2.org/#type=sequential&amp;scheme=BuGn&amp;n=3">ColorBrewer</a>).</p></li>
</ul>
</section>
</section>
<section id="ejemplos-integrando-las-herramientas-de-tidyverse" class="level3" data-number="1.7.15">
<h3 data-number="1.7.15" class="anchored" data-anchor-id="ejemplos-integrando-las-herramientas-de-tidyverse"><span class="header-section-number">1.7.15</span> Ejemplos integrando las herramientas de tidyverse</h3>
<ul>
<li>Ejemplo 1:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>penguins_long <span class="ot">&lt;-</span> penguins <span class="sc">%&gt;%</span> </span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">contains</span>(<span class="st">"mm"</span>),</span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"var"</span>, <span class="at">values_to =</span> <span class="st">"val"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>()</span>
<span id="cb172-6"><a href="#cb172-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-7"><a href="#cb172-7" aria-hidden="true" tabindex="-1"></a>penguins_long <span class="sc">%&gt;%</span> </span>
<span id="cb172-8"><a href="#cb172-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> var, <span class="at">y =</span> val, <span class="at">fill=</span>var)) <span class="sc">+</span></span>
<span id="cb172-9"><a href="#cb172-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb172-10"><a href="#cb172-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb172-11"><a href="#cb172-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb172-12"><a href="#cb172-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span><span class="st">"Medida en mm"</span>) <span class="sc">+</span></span>
<span id="cb172-13"><a href="#cb172-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb172-14"><a href="#cb172-14" aria-hidden="true" tabindex="-1"></a><span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb172-15"><a href="#cb172-15" aria-hidden="true" tabindex="-1"></a><span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-117-1.png" style="width:50.0%;height:50.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Ejemplo 2:</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">%&gt;%</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">count</span>(species) <span class="sc">%&gt;%</span></span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> prop, <span class="at">y =</span> species)) <span class="sc">+</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Proporción"</span>, <span class="at">y=</span><span class="st">""</span>) <span class="sc">+</span> </span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>),</span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a><span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a><span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>)) </span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-118-1.png" style="width:60.0%;height:40.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="extensiones-de-ggplot" class="level3" data-number="1.7.16">
<h3 data-number="1.7.16" class="anchored" data-anchor-id="extensiones-de-ggplot"><span class="header-section-number">1.7.16</span> Extensiones de ggplot</h3>
<p>Hay muchas <a href="https://exts.ggplot2.tidyverse.org/gallery/">extensiones de ggplot</a>, algunos ejemplos son:</p>
<ul>
<li><code>GGally</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>country,<span class="sc">-</span>year) <span class="sc">%&gt;%</span> </span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggpairs</span>(<span class="fu">aes</span>(<span class="at">color=</span>continent))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="intro_files/figure-html/unnamed-chunk-120-1.png" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><code>ggpubr</code> proporciona algunas funciones fáciles de usar para crear y personalizar gráficos útiles para una publicación.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figuras/violin.PNG" style="width:50.0%;height:50.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Puedes ver más ejemplos en <a href="https://rpkgs.datanovia.com/ggpubr/index.html">‘ggplot2’ Based Publication Ready Plots</a>.</p></li>
<li><p>En la cuenta de gitHub de <a href="https://allisonhorst.github.io/palmerpenguins/articles/examples.html">Allison Horst</a> puedes encontrar otros ejemplos de gráficos con los datos de los pingüinos.</p></li>
</ul>
</section>
<section id="gráficos-interactivos" class="level3" data-number="1.7.17">
<h3 data-number="1.7.17" class="anchored" data-anchor-id="gráficos-interactivos"><span class="header-section-number">1.7.17</span> Gráficos interactivos</h3>
<p>Mencionaremos algunas librerías que podéis utilizar tanto en combinación con <code>ggplot2</code> o por sí solas para crear visualizaciones interactivas en R.</p>
<section id="combinando-ggplot2y-shiny" class="level4" data-number="1.7.17.1">
<h4 data-number="1.7.17.1" class="anchored" data-anchor-id="combinando-ggplot2y-shiny"><span class="header-section-number">1.7.17.1</span> <strong>Combinando <code>ggplot2</code>y <code>shiny</code></strong></h4>
<p><code>shiny</code> es un paquete de RStudio que hace fácil construir aplicaciones web interactivas con R. Para una introducción y ejemplos en vivo, visita la página web de <a href="https://shiny.rstudio.com/">Shiny</a>.</p>
<p>Para ver el uso potencial, puedes consultar los ejemplos de Hello Shiny, ejecuta las siguientes instrucciones en la consola de tu RStudio.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="fu">runExample</span>(<span class="st">"01_hello"</span>)</span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="fu">runExample</span>(<span class="st">"04_mpg"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plotly" class="level4" data-number="1.7.17.2">
<h4 data-number="1.7.17.2" class="anchored" data-anchor-id="plotly"><span class="header-section-number">1.7.17.2</span> Plotly</h4>
<p><a href="https://plotly.com/r/plotly-fundamentals/">Plot.ly</a> es una herramienta para crear gráficos interactivos en línea y aplicaciones web.</p>
<p>El paquete <code>plotly</code> permite crear los gráficos interactivos a partir de tus gráficos <code>ggplot</code> desde R.</p>
<p>Para ilustrar las herramientas de esta librería utilizaremos datos de los precios de Google desde enero de 2018 hasta el 31 de diciembre de 2019 que están disponibles en la librería <code>tidyquant</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyquant)</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="fu">getSymbols</span>(<span class="st">"GOOG"</span>,</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">from =</span> <span class="st">"2018-01-01"</span>,</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">to =</span> <span class="st">"2019-12-31"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "GOOG"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>stock <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(GOOG<span class="sc">$</span>GOOG.Adjusted)</span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a>stock<span class="sc">$</span>GOOG.Adjusted <span class="ot">&lt;-</span> stock<span class="sc">$</span>GOOG.Adjusted<span class="sc">/</span>stock<span class="sc">$</span>GOOG.Adjusted[<span class="dv">1</span>]</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>stock <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(stock,<span class="fu">rownames</span>(stock))</span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(stock) <span class="ot">&lt;-</span> <span class="fu">append</span>(<span class="st">'GOOG'</span>,<span class="st">'date'</span>)</span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(stock, <span class="at">type =</span> <span class="st">'scatter'</span>, <span class="at">mode =</span> <span class="st">'lines'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_trace</span>(<span class="at">x =</span> <span class="sc">~</span>date, <span class="at">y =</span> <span class="sc">~</span>GOOG, <span class="at">name =</span> <span class="st">'GOOG'</span>)<span class="sc">%&gt;%</span></span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">showlegend =</span> F)</span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">warn =</span> <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>fig <span class="ot">&lt;-</span> fig <span class="sc">%&gt;%</span></span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb178-13"><a href="#cb178-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">zerolinecolor =</span> <span class="st">'#ffff'</span>,</span>
<span id="cb178-14"><a href="#cb178-14" aria-hidden="true" tabindex="-1"></a>                      <span class="at">zerolinewidth =</span> <span class="dv">2</span>,</span>
<span id="cb178-15"><a href="#cb178-15" aria-hidden="true" tabindex="-1"></a>                      <span class="at">gridcolor =</span> <span class="st">'ffff'</span>),</span>
<span id="cb178-16"><a href="#cb178-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">zerolinecolor =</span> <span class="st">'#ffff'</span>,</span>
<span id="cb178-17"><a href="#cb178-17" aria-hidden="true" tabindex="-1"></a>                      <span class="at">zerolinewidth =</span> <span class="dv">2</span>,</span>
<span id="cb178-18"><a href="#cb178-18" aria-hidden="true" tabindex="-1"></a>                      <span class="at">gridcolor =</span> <span class="st">'ffff'</span>),</span>
<span id="cb178-19"><a href="#cb178-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">plot_bgcolor=</span><span class="st">'#e5ecf6'</span>, <span class="at">width =</span> <span class="dv">900</span>)</span>
<span id="cb178-20"><a href="#cb178-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-21"><a href="#cb178-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-22"><a href="#cb178-22" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-0d7598595affc4f25ab8" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-0d7598595affc4f25ab8">{"x":{"visdat":{"24607b1b1bc3":["function () ","plotlyVisDat"]},"cur_data":"24607b1b1bc3","attrs":{"24607b1b1bc3":{"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"24607b1b1bc3.1":{"mode":"lines","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","x":{},"y":{},"name":"GOOG","inherit":true}},"layout":{"width":900,"margin":{"b":40,"l":60,"t":25,"r":10},"showlegend":false,"xaxis":{"domain":[0,1],"automargin":true,"zerolinecolor":"#ffff","zerolinewidth":2,"gridcolor":"ffff","title":"date"},"yaxis":{"domain":[0,1],"automargin":true,"zerolinecolor":"#ffff","zerolinewidth":2,"gridcolor":"ffff","title":"GOOG"},"plot_bgcolor":"#e5ecf6","hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"mode":"lines","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"mode":"lines","type":"scatter","x":["2018-01-02","2018-01-03","2018-01-04","2018-01-05","2018-01-08","2018-01-09","2018-01-10","2018-01-11","2018-01-12","2018-01-16","2018-01-17","2018-01-18","2018-01-19","2018-01-22","2018-01-23","2018-01-24","2018-01-25","2018-01-26","2018-01-29","2018-01-30","2018-01-31","2018-02-01","2018-02-02","2018-02-05","2018-02-06","2018-02-07","2018-02-08","2018-02-09","2018-02-12","2018-02-13","2018-02-14","2018-02-15","2018-02-16","2018-02-20","2018-02-21","2018-02-22","2018-02-23","2018-02-26","2018-02-27","2018-02-28","2018-03-01","2018-03-02","2018-03-05","2018-03-06","2018-03-07","2018-03-08","2018-03-09","2018-03-12","2018-03-13","2018-03-14","2018-03-15","2018-03-16","2018-03-19","2018-03-20","2018-03-21","2018-03-22","2018-03-23","2018-03-26","2018-03-27","2018-03-28","2018-03-29","2018-04-02","2018-04-03","2018-04-04","2018-04-05","2018-04-06","2018-04-09","2018-04-10","2018-04-11","2018-04-12","2018-04-13","2018-04-16","2018-04-17","2018-04-18","2018-04-19","2018-04-20","2018-04-23","2018-04-24","2018-04-25","2018-04-26","2018-04-27","2018-04-30","2018-05-01","2018-05-02","2018-05-03","2018-05-04","2018-05-07","2018-05-08","2018-05-09","2018-05-10","2018-05-11","2018-05-14","2018-05-15","2018-05-16","2018-05-17","2018-05-18","2018-05-21","2018-05-22","2018-05-23","2018-05-24","2018-05-25","2018-05-29","2018-05-30","2018-05-31","2018-06-01","2018-06-04","2018-06-05","2018-06-06","2018-06-07","2018-06-08","2018-06-11","2018-06-12","2018-06-13","2018-06-14","2018-06-15","2018-06-18","2018-06-19","2018-06-20","2018-06-21","2018-06-22","2018-06-25","2018-06-26","2018-06-27","2018-06-28","2018-06-29","2018-07-02","2018-07-03","2018-07-05","2018-07-06","2018-07-09","2018-07-10","2018-07-11","2018-07-12","2018-07-13","2018-07-16","2018-07-17","2018-07-18","2018-07-19","2018-07-20","2018-07-23","2018-07-24","2018-07-25","2018-07-26","2018-07-27","2018-07-30","2018-07-31","2018-08-01","2018-08-02","2018-08-03","2018-08-06","2018-08-07","2018-08-08","2018-08-09","2018-08-10","2018-08-13","2018-08-14","2018-08-15","2018-08-16","2018-08-17","2018-08-20","2018-08-21","2018-08-22","2018-08-23","2018-08-24","2018-08-27","2018-08-28","2018-08-29","2018-08-30","2018-08-31","2018-09-04","2018-09-05","2018-09-06","2018-09-07","2018-09-10","2018-09-11","2018-09-12","2018-09-13","2018-09-14","2018-09-17","2018-09-18","2018-09-19","2018-09-20","2018-09-21","2018-09-24","2018-09-25","2018-09-26","2018-09-27","2018-09-28","2018-10-01","2018-10-02","2018-10-03","2018-10-04","2018-10-05","2018-10-08","2018-10-09","2018-10-10","2018-10-11","2018-10-12","2018-10-15","2018-10-16","2018-10-17","2018-10-18","2018-10-19","2018-10-22","2018-10-23","2018-10-24","2018-10-25","2018-10-26","2018-10-29","2018-10-30","2018-10-31","2018-11-01","2018-11-02","2018-11-05","2018-11-06","2018-11-07","2018-11-08","2018-11-09","2018-11-12","2018-11-13","2018-11-14","2018-11-15","2018-11-16","2018-11-19","2018-11-20","2018-11-21","2018-11-23","2018-11-26","2018-11-27","2018-11-28","2018-11-29","2018-11-30","2018-12-03","2018-12-04","2018-12-06","2018-12-07","2018-12-10","2018-12-11","2018-12-12","2018-12-13","2018-12-14","2018-12-17","2018-12-18","2018-12-19","2018-12-20","2018-12-21","2018-12-24","2018-12-26","2018-12-27","2018-12-28","2018-12-31","2019-01-02","2019-01-03","2019-01-04","2019-01-07","2019-01-08","2019-01-09","2019-01-10","2019-01-11","2019-01-14","2019-01-15","2019-01-16","2019-01-17","2019-01-18","2019-01-22","2019-01-23","2019-01-24","2019-01-25","2019-01-28","2019-01-29","2019-01-30","2019-01-31","2019-02-01","2019-02-04","2019-02-05","2019-02-06","2019-02-07","2019-02-08","2019-02-11","2019-02-12","2019-02-13","2019-02-14","2019-02-15","2019-02-19","2019-02-20","2019-02-21","2019-02-22","2019-02-25","2019-02-26","2019-02-27","2019-02-28","2019-03-01","2019-03-04","2019-03-05","2019-03-06","2019-03-07","2019-03-08","2019-03-11","2019-03-12","2019-03-13","2019-03-14","2019-03-15","2019-03-18","2019-03-19","2019-03-20","2019-03-21","2019-03-22","2019-03-25","2019-03-26","2019-03-27","2019-03-28","2019-03-29","2019-04-01","2019-04-02","2019-04-03","2019-04-04","2019-04-05","2019-04-08","2019-04-09","2019-04-10","2019-04-11","2019-04-12","2019-04-15","2019-04-16","2019-04-17","2019-04-18","2019-04-22","2019-04-23","2019-04-24","2019-04-25","2019-04-26","2019-04-29","2019-04-30","2019-05-01","2019-05-02","2019-05-03","2019-05-06","2019-05-07","2019-05-08","2019-05-09","2019-05-10","2019-05-13","2019-05-14","2019-05-15","2019-05-16","2019-05-17","2019-05-20","2019-05-21","2019-05-22","2019-05-23","2019-05-24","2019-05-28","2019-05-29","2019-05-30","2019-05-31","2019-06-03","2019-06-04","2019-06-05","2019-06-06","2019-06-07","2019-06-10","2019-06-11","2019-06-12","2019-06-13","2019-06-14","2019-06-17","2019-06-18","2019-06-19","2019-06-20","2019-06-21","2019-06-24","2019-06-25","2019-06-26","2019-06-27","2019-06-28","2019-07-01","2019-07-02","2019-07-03","2019-07-05","2019-07-08","2019-07-09","2019-07-10","2019-07-11","2019-07-12","2019-07-15","2019-07-16","2019-07-17","2019-07-18","2019-07-19","2019-07-22","2019-07-23","2019-07-24","2019-07-25","2019-07-26","2019-07-29","2019-07-30","2019-07-31","2019-08-01","2019-08-02","2019-08-05","2019-08-06","2019-08-07","2019-08-08","2019-08-09","2019-08-12","2019-08-13","2019-08-14","2019-08-15","2019-08-16","2019-08-19","2019-08-20","2019-08-21","2019-08-22","2019-08-23","2019-08-26","2019-08-27","2019-08-28","2019-08-29","2019-08-30","2019-09-03","2019-09-04","2019-09-05","2019-09-06","2019-09-09","2019-09-10","2019-09-11","2019-09-12","2019-09-13","2019-09-16","2019-09-17","2019-09-18","2019-09-19","2019-09-20","2019-09-23","2019-09-24","2019-09-25","2019-09-26","2019-09-27","2019-09-30","2019-10-01","2019-10-02","2019-10-03","2019-10-04","2019-10-07","2019-10-08","2019-10-09","2019-10-10","2019-10-11","2019-10-14","2019-10-15","2019-10-16","2019-10-17","2019-10-18","2019-10-21","2019-10-22","2019-10-23","2019-10-24","2019-10-25","2019-10-28","2019-10-29","2019-10-30","2019-10-31","2019-11-01","2019-11-04","2019-11-05","2019-11-06","2019-11-07","2019-11-08","2019-11-11","2019-11-12","2019-11-13","2019-11-14","2019-11-15","2019-11-18","2019-11-19","2019-11-20","2019-11-21","2019-11-22","2019-11-25","2019-11-26","2019-11-27","2019-11-29","2019-12-02","2019-12-03","2019-12-04","2019-12-05","2019-12-06","2019-12-09","2019-12-10","2019-12-11","2019-12-12","2019-12-13","2019-12-16","2019-12-17","2019-12-18","2019-12-19","2019-12-20","2019-12-23","2019-12-24","2019-12-26","2019-12-27","2019-12-30"],"y":[1,1.01641315585571,1.02009389098261,1.03495774246717,1.03938028398254,1.03874177887966,1.03531456889121,1.03804696669601,1.05376523873056,1.05329579814499,1.06289200044014,1.06083564579207,1.06808450188435,1.0852676176689,1.09856339575539,1.09318313240445,1.09893899120635,1.10407511393229,1.10383097330729,1.09266669761407,1.09853524221501,1.09643189336213,1.04403758160945,0.99136151954042,1.01464786439994,0.984582175671215,0.940394370208884,0.97444131340779,0.987737091494278,0.987887315347161,1.00441315700191,1.02302350684511,1.02798125217778,1.03517372955179,1.0435117623056,1.03908922079024,1.05801878736612,1.07394366197183,1.05003758103635,1.03730516030755,1.0042441641221,1.01307040648841,1.02434743961818,1.02822532116527,1.04191546372964,1.05727698097766,1.08923941598812,1.09342720139195,1.06870423796031,1.07933330983623,1.07941784209489,1.0664131272007,1.03269485688545,1.03071364998258,1.02430044541337,0.985051616256786,0.959220635499193,0.988929569441388,0.943755888603103,0.943248838326181,0.968816909431852,0.94504228332233,0.951558717539613,0.962572769379952,0.965079795586671,0.945577487139635,0.953474161210754,0.96867607009243,0.957718325332857,0.969492952588578,0.966450722564554,0.974629075314517,1.00860094240574,1.00664788904324,1.02131452247011,1.00747415605285,1.00230049527307,0.957727709846317,0.958854424561693,0.976563359650088,0.967183072802047,0.95523945266652,0.974000026362603,0.961859188169381,0.96123945209342,0.984234733760637,0.990413110580803,0.989586843571193,1.01667606550763,1.03058219515662,1.03123001313545,1.03305161167199,1.01336146968071,1.01574649721244,1.01276057426918,1.00127701020577,1.01369014256437,1.00444131054229,1.01379344384995,1.01337092583168,1.01000940743746,0.995605612025015,1.00262909651922,1.01876995820954,1.05117368026518,1.069755876568,1.07010331847858,1.06749299098628,1.0552676205344,1.05246007498441,1.0610234793363,1.06978403010838,1.06553048147282,1.08180279798911,1.08193425281507,1.10184038189096,1.09676995075924,1.09844132544289,1.08700468394678,1.08495771381217,1.05615965077575,1.05019718940269,1.03660096361044,1.04621593493251,1.04755870837001,1.05864790795555,1.03557747854313,1.05565260049883,1.07058214357761,1.08361501201218,1.08247884114583,1.08347417267276,1.11124882227938,1.11626294633033,1.11160564870342,1.1256337770274,1.12289199470914,1.11451642390148,1.11259152407937,1.13192491128411,1.17190609067818,1.18657279574255,1.19092018951273,1.16291078379456,1.14529576547829,1.14296711666483,1.14554929061675,1.15131453393211,1.14902349481001,1.15001875469942,1.16640375701474,1.16958682637819,1.17286388415126,1.16207513227149,1.159633797659,1.16629107121571,1.14026294403793,1.1328544795793,1.12766197813509,1.13405634203987,1.12828171421105,1.13364320853506,1.13181222548507,1.14615025766579,1.16602816156378,1.15600936961286,1.17305164605799,1.16349298181668,1.14384037787925,1.12394363331683,1.11406575234283,1.09994363560923,1.09373710524868,1.09355865621791,1.10550234799094,1.09184974348041,1.10359621719575,1.10096712067653,1.08549298926698,1.09034743331408,1.09961503436308,1.11443189164283,1.09492019868233,1.1017558496323,1.11234738345437,1.10844134836689,1.12172767030241,1.12062910912742,1.12235679089184,1.12686386466586,1.12953049923892,1.09689202107174,1.08671362075447,1.07884510022374,1.06931458952281,1.01523006242206,1.01344600193937,1.04232866887196,1.02558684013259,1.05284505494883,1.04759624642386,1.02156804760857,1.02953994106239,1.03395302642679,1.03632866944506,0.986582151601012,1.02870421790181,1.0060751471721,0.957821626618435,0.972967156781837,1.01105166153169,1.00469483568075,0.993230040644256,0.9766103538549,0.991370904053881,1.0266572477672,1.01633800811051,1.00107979214807,0.975239426877017,0.972816932928954,0.979962416098151,0.999727705834617,0.996704244837515,0.957746478873239,0.963154895764561,0.974281705041447,0.961389675946303,0.984619713725059,0.980666684432768,1.01993428261627,1.0218779514653,1.0276338102672,1.038901387246,0.98668545288659,1.00350235773364,0.973314527054908,0.976103303577978,0.987558714101012,0.998760527848078,0.997089224801937,0.978497643985659,0.954488261764598,0.96592490326071,0.960572793450154,0.94780283466751,0.919755890895503,0.916638513126284,0.976018771319322,0.980169018669308,0.973784039277986,0.972403727786642,0.982018770746222,0.95404697471941,1.00536149432402,1.00318306936345,1.01059153382207,1.00907045462881,1.00500466789998,0.992666683286568,0.98092959408469,1.01140841631822,1.01499530631052,1.02338026163164,1.03123001313545,1.00518311693075,1.00992487517881,1.00835680178074,1.02440374669894,1.00476998342595,0.995887290703859,1.02259153267587,1.04823475152674,1.04295771782387,1.06366196036898,1.07604693918721,1.04716434389213,1.03165260279123,1.02822532116527,1.02817839859797,1.05292958720749,1.05179341634115,1.05321126588633,1.04568073111521,1.05029110617481,1.04582157045463,1.03001876616142,1.04260096303734,1.04169016376907,1.04707042712001,1.04793430382097,1.05156804474307,1.07135210350646,1.07774646741124,1.09110800872946,1.08719251749101,1.07352114395357,1.07260096017184,1.1039999661871,1.12037558398896,1.120488269788,1.11319249112841,1.11216900606111,1.11198124415438,1.12568077123221,1.14926763543501,1.15637558055036,1.13192491128411,1.12018782208223,1.11231922991399,1.10142724838615,1.09717369975059,1.10169954255153,1.12153052388223,1.1272206910899,1.13231927576199,1.14084507042254,1.13347414401775,1.1303662223995,1.12417838942837,1.12878876448797,1.13109857263699,1.14353993017349,1.14657277568405,1.15223471771384,1.16088265432438,1.16091080786477,1.17261974352626,1.18737090921178,1.17934270867719,1.18633803963102,1.19453523304541,1.20899526390112,1.11594365796013,1.09678871978616,1.09165259706023,1.11305165178899,1.11679815014763,1.10244134893999,1.09508919156213,1.09143660997561,1.09321128594484,1.06293899464495,1.05205632599307,1.09315490722656,1.10702349882171,1.09136153386792,1.0693427430632,1.07946476466219,1.0811455238593,1.07114557257281,1.06429108095841,1.06492958606129,1.04831928378539,1.04971829266615,1.03627229072678,0.972985925808759,0.988779345588505,0.978610329784698,0.980600921201034,1.00097649086249,1.01444133346629,1.01288264458168,1.01129580215669,1.02231923851049,1.01910801560666,1.02582159624413,1.0362441371864,1.03505165923929,1.04358683841329,1.05340848394403,1.04743663805751,1.02004696841531,1.01389674513553,1.01033800868361,1.01493899922975,1.03093894994315,1.04342723004695,1.05312673362768,1.06252578950264,1.04821598249982,1.05617841980267,1.07087320676992,1.07437556450356,1.0750234541199,1.08013142330546,1.08317372496699,1.07638499658432,1.0763662275574,1.06112678062188,1.0686103211882,1.07625354175836,1.0683661805632,1.0630234552661,1.17409390015222,1.16376527598206,1.15036619661,1.14242252833407,1.1352206664466,1.12111739037742,1.08199063153334,1.09854462672847,1.10233804765442,1.13126763715431,1.11550237091494,1.10301409081114,1.12419715845529,1.09323005497176,1.09601875985732,1.10572771958902,1.12530517578125,1.11050701589092,1.11854460093897,1.11692960497359,1.0810234535468,1.09754929520155,1.09656334818809,1.09954927113135,1.12004698274281,1.11558683153609,1.09707978297847,1.10930515343035,1.13744601397447,1.1313896358293,1.13090142621681,1.13239435186968,1.14569951446963,1.15892021644843,1.16390611532149,1.15615020895228,1.15413146399556,1.15719246304651,1.16310800185226,1.15486381423305,1.15871361387727,1.14437558169656,1.17044131856569,1.16562441257244,1.15031927404269,1.14460095329464,1.13154931583315,1.10481692032075,1.11533330639763,1.13521128193314,1.13397180978121,1.11655400952263,1.12892960382739,1.1349013780764,1.1412675884408,1.14285443086579,1.16714556340321,1.16773707430128,1.17659154184547,1.16947421221666,1.17009387665511,1.16694834534551,1.18228170905315,1.18402815984448,1.18791549754255,1.2112676056338,1.18555869518871,1.18430983852333,1.18320189283487,1.1960000051579,1.21255392871552,1.21317373642899,1.21295767770687,1.2289765407222,1.23133327143853,1.21989677321743,1.21953056227993,1.21877937137801,1.23141780369718,1.25339905644806,1.24009396548562,1.23517375820679,1.22352105798856,1.2219248310501,1.21628165804724,1.22693902673856,1.23338024157314,1.23285442226929,1.22531457462221,1.21119252952612,1.21622535096648,1.23994366999523,1.24707045577501,1.25879808882592,1.26155871180861,1.26259158138938,1.26292956714899,1.26785908730377,1.26556811981918,1.27809393797682,1.2724130836451,1.27006566580472,1.27327703198357,1.26722065383839,1.26651645714129,1.26155871180861,1.27737082897777,1.26938023813454,1.25459153439517],"name":"GOOG","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="ggiraph" class="level4" data-number="1.7.17.3">
<h4 data-number="1.7.17.3" class="anchored" data-anchor-id="ggiraph"><span class="header-section-number">1.7.17.3</span> <code>ggiraph</code></h4>
<p><a href="https://davidgohel.github.io/ggiraph/index.html">ggiraph</a> es un paquete de R que permite crear gráficos dinámicos <code>ggplot2</code>.</p>
<p>Permite añadir tooltips (globo /herramienta de ayuda visual), animaciones y acciones JavaScript a los gráficos.</p>
</section>
</section>
<section id="recursos-adicionales" class="level3" data-number="1.7.18">
<h3 data-number="1.7.18" class="anchored" data-anchor-id="recursos-adicionales"><span class="header-section-number">1.7.18</span> Recursos adicionales</h3>
<ul>
<li><p><a href="https://ggplot2-book.org/">ggplot2: Elegant Graphics for Data Analysis</a> por Hadley Wickham, disponible en acceso abierto.</p></li>
<li><p><a href="https://clauswilke.com/dataviz/">Fundamentals of Data Visualization</a> por Claus O. Wilke sobre la visualización de datos en general pero utilizando <code>ggplot2</code>. Puedes encontrar los códigos en su perfil de GitHub.</p></li>
<li><p><a href="http://www.cookbook-r.com/Graphs/">Cookbook for R</a> por Winston Chang con recetas para producir gráficos en R.</p></li>
<li><p><a href="http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html">Galería 50 mejores visualizaciones de ggplot2</a>.</p></li>
<li><p><a href="https://cedricscherer.netlify.app/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/">A ggplot2 Tutorial for Beautiful Plotting in R</a></p></li>
</ul>
</section>
</section>
<section id="práctica-2" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="práctica-2"><span class="header-section-number">1.8</span> <span style="color: red;"><em>Práctica 2</em></span></h2>
<p>La base de datos <code>mpg</code> (ya precargada en tidyverse) contiene datos de vehículos y sus rendimientos tanto en ciudad como en carretera. La descripción de las variables es la siguiente:</p>
<ul>
<li><p><code>manufacturer</code>: nombre del fabricante.</p></li>
<li><p><code>model</code>: nombre del modelo.</p></li>
<li><p><code>displ</code>: desplazamiento del motor, en litros.</p></li>
<li><p><code>year</code>: año de fabricación.</p></li>
<li><p><code>cyl</code>: número de cilindros.</p></li>
<li><p><code>trans</code>: tipo de transmisión (manual o automática)</p></li>
<li><p><code>drv</code>: tipo de tracción, con f = tracción delantera, r = tracción trasera, 4 = tracción en cuatro ruedas.</p></li>
<li><p><code>cty</code>: rendimiento en ciudad, en millas por galón.</p></li>
<li><p><code>hwy</code>: rendimiento en carretera, en millas por galón.</p></li>
<li><p><code>fl</code>: tipo de combustible, con e = etanol, d = diesel, r = regular, p = premium, c = CNG (gas natural).</p></li>
<li><p><code>class</code>: tipo de vehículo.</p></li>
</ul>
<ol type="1">
<li><p>Dibujad un gráfico que permita visualizar el número de vehículos de cada fabricante del conjunto de datos.</p></li>
<li><p>Dibujad un gráfico para mostrar el rendimiento medio en ciudad para cada clase.</p></li>
<li><p>Construid un gráfico para mostrar el rendimiento medio en ciudad para cada clase y tipo de tracción simultáneamente.</p></li>
<li><p>Utilizad un gráfico para mostrar la relación entre el tamaño del motor y el rendimiento en carretera, para cada clase de vehículo. ¿Qué podéis observar?</p></li>
<li><p>Comparad la distribución del rendimiento en ciudad para distintos tipos de tracción.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Presentación</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./EM.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Análisis Multivariante</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Análisis de Datos UIB</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Este libro se ha creado con <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>